let vi={};var mi=(()=>{var Ce=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(Ce=Ce||__filename),function(Fr={}){var u=Fr,Pr,ke;u.ready=new Promise((e,r)=>{Pr=e,ke=r});var Sr=Object.assign({},u),Dr=[],rr="./this.program",Fe=(e,r)=>{throw r},Lr=typeof window=="object",J=typeof importScripts=="function",se=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",W="";function kt(e){return u.locateFile?u.locateFile(e,W):W+e}var ue,le,Pe;if(se){var tr=require("fs"),nr=require("path");J?W=nr.dirname(W)+"/":W=__dirname+"/",ue=(e,r)=>(e=Te(e)?new URL(e):nr.normalize(e),tr.readFileSync(e,r?void 0:"utf8")),Pe=e=>{var r=ue(e,!0);return r.buffer||(r=new Uint8Array(r)),r},le=(e,r,t,n=!0)=>{e=Te(e)?new URL(e):nr.normalize(e),tr.readFile(e,n?void 0:"utf8",(a,o)=>{a?t(a):r(n?o.buffer:o)})},!u.thisProgram&&process.argv.length>1&&(rr=process.argv[1].replace(/\\/g,"/")),Dr=process.argv.slice(2),Fe=(e,r)=>{throw process.exitCode=e,r},u.inspect=()=>"[Emscripten Module object]"}else(Lr||J)&&(J?W=self.location.href:typeof document<"u"&&document.currentScript&&(W=document.currentScript.src),Ce&&(W=Ce),W.indexOf("blob:")!==0?W=W.substr(0,W.replace(/[?#].*/,"").lastIndexOf("/")+1):W="",ue=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(null),r.responseText},J&&(Pe=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),le=(e,r,t)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{if(n.status==200||n.status==0&&n.response){r(n.response);return}t()},n.onerror=t,n.send(null)});var ar=u.print||console.log.bind(console),H=u.printErr||console.error.bind(console);Object.assign(u,Sr),Sr=null,u.arguments&&(Dr=u.arguments),u.thisProgram&&(rr=u.thisProgram),u.quit&&(Fe=u.quit);var de;u.wasmBinary&&(de=u.wasmBinary);var Ft=u.noExitRuntime||!0;typeof WebAssembly!="object"&&te("no native wasm support detected");var Se,re=!1,ce;function De(e,r){e||te(r)}var O,V,G,Le,_,F,$r,Tr;function Ar(){var e=Se.buffer;u.HEAP8=O=new Int8Array(e),u.HEAP16=G=new Int16Array(e),u.HEAPU8=V=new Uint8Array(e),u.HEAPU16=Le=new Uint16Array(e),u.HEAP32=_=new Int32Array(e),u.HEAPU32=F=new Uint32Array(e),u.HEAPF32=$r=new Float32Array(e),u.HEAPF64=Tr=new Float64Array(e)}var Mr=[],Rr=[],xr=[],Pt=!1,St=0;function jr(){return Ft||St>0}function Dt(){if(u.preRun)for(typeof u.preRun=="function"&&(u.preRun=[u.preRun]);u.preRun.length;)Tt(u.preRun.shift());fr(Mr)}function Lt(){Pt=!0,!u.noFSInit&&!i.init.initialized&&i.init(),i.ignorePermissions=!1,K.init(),fr(Rr)}function $t(){if(u.postRun)for(typeof u.postRun=="function"&&(u.postRun=[u.postRun]);u.postRun.length;)Mt(u.postRun.shift());fr(xr)}function Tt(e){Mr.unshift(e)}function At(e){Rr.unshift(e)}function Mt(e){xr.unshift(e)}var Z=0,ir=null,fe=null;function pi(e){return e}function $e(e){Z++,u.monitorRunDependencies&&u.monitorRunDependencies(Z)}function ve(e){if(Z--,u.monitorRunDependencies&&u.monitorRunDependencies(Z),Z==0&&(ir!==null&&(clearInterval(ir),ir=null),fe)){var r=fe;fe=null,r()}}function te(e){u.onAbort&&u.onAbort(e),e="Aborted("+e+")",H(e),re=!0,ce=1,e+=". Build with -sASSERTIONS for more info.";var r=new WebAssembly.RuntimeError(e);throw ke(r),r}var Rt="data:application/octet-stream;base64,";function Or(e){return e.startsWith(Rt)}function Te(e){return e.startsWith("file://")}var ne;ne="opencv-wasm.wasm",Or(ne)||(ne=kt(ne));function zr(e){if(e==ne&&de)return new Uint8Array(de);if(Pe)return Pe(e);throw"both async and sync fetching of the wasm failed"}function xt(e){if(!de&&(Lr||J)){if(typeof fetch=="function"&&!Te(e))return fetch(e,{credentials:"same-origin"}).then(r=>{if(!r.ok)throw"failed to load wasm binary file at '"+e+"'";return r.arrayBuffer()}).catch(()=>zr(e));if(le)return new Promise((r,t)=>{le(e,n=>r(new Uint8Array(n)),t)})}return Promise.resolve().then(()=>zr(e))}function Ur(e,r,t){return xt(e).then(n=>WebAssembly.instantiate(n,r)).then(n=>n).then(t,n=>{H(`failed to asynchronously prepare wasm: ${n}`),te(n)})}function jt(e,r,t,n){return!e&&typeof WebAssembly.instantiateStreaming=="function"&&!Or(r)&&!Te(r)&&!se&&typeof fetch=="function"?fetch(r,{credentials:"same-origin"}).then(a=>{var o=WebAssembly.instantiateStreaming(a,t);return o.then(n,function(s){return H(`wasm streaming compile failed: ${s}`),H("falling back to ArrayBuffer instantiation"),Ur(r,t,n)})}):Ur(r,t,n)}function Ot(){var e={a:Na};function r(n,a){return T=n.exports,Se=T.Z,Ar(),nt=T.aa,At(T._),ve("wasm-instantiate"),T}$e("wasm-instantiate");function t(n){r(n.instance)}if(u.instantiateWasm)try{return u.instantiateWasm(e,r)}catch(n){H(`Module.instantiateWasm callback failed with error: ${n}`),ke(n)}return jt(de,ne,e,t).catch(ke),{}}var P,z,or=(e,r)=>{if(f.mainLoop.timingMode=e,f.mainLoop.timingValue=r,!f.mainLoop.func)return 1;if(f.mainLoop.running||(f.mainLoop.running=!0),e==0)f.mainLoop.scheduler=function(){var s=Math.max(0,f.mainLoop.tickStartTime+r-Ae())|0;setTimeout(f.mainLoop.runner,s)},f.mainLoop.method="timeout";else if(e==1)f.mainLoop.scheduler=function(){f.requestAnimationFrame(f.mainLoop.runner)},f.mainLoop.method="rAF";else if(e==2){if(typeof setImmediate>"u"){var t=[],n="setimmediate",a=o=>{(o.data===n||o.data.target===n)&&(o.stopPropagation(),t.shift()())};addEventListener("message",a,!0),setImmediate=function(s){t.push(s),J?(u.setImmediates===void 0&&(u.setImmediates=[]),u.setImmediates.push(s),postMessage({target:n})):postMessage(n,"*")}}f.mainLoop.scheduler=function(){setImmediate(f.mainLoop.runner)},f.mainLoop.method="immediate"}return 0},Ae;Ae=()=>performance.now();var zt=(e,r,t,n,a)=>{De(!f.mainLoop.func,"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters."),f.mainLoop.func=e,f.mainLoop.arg=n;var o=f.mainLoop.currentlyRunningMainloop;function s(){return!(o<f.mainLoop.currentlyRunningMainloop)}if(f.mainLoop.running=!1,f.mainLoop.runner=function(){if(!re){if(f.mainLoop.queue.length>0){var d=Date.now(),c=f.mainLoop.queue.shift();if(c.func(c.arg),f.mainLoop.remainingBlockers){var v=f.mainLoop.remainingBlockers,m=v%1==0?v-1:Math.floor(v);c.counted?f.mainLoop.remainingBlockers=m:(m=m+.5,f.mainLoop.remainingBlockers=(8*v+m)/9)}if(f.mainLoop.updateStatus(),!s())return;setTimeout(f.mainLoop.runner,0);return}if(s()){if(f.mainLoop.currentFrameNumber=f.mainLoop.currentFrameNumber+1|0,f.mainLoop.timingMode==1&&f.mainLoop.timingValue>1&&f.mainLoop.currentFrameNumber%f.mainLoop.timingValue!=0){f.mainLoop.scheduler();return}else f.mainLoop.timingMode==0&&(f.mainLoop.tickStartTime=Ae());f.mainLoop.runIter(e),s()&&(typeof SDL=="object"&&SDL.audio&&SDL.audio.queueNewAudioData&&SDL.audio.queueNewAudioData(),f.mainLoop.scheduler())}}},a||(r&&r>0?or(0,1e3/r):or(1,1),f.mainLoop.scheduler()),t)throw"unwind"},Vr=e=>{if(e instanceof Ir||e=="unwind")return ce;Fe(1,e)};function Ir(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var L={isAbs:e=>e.charAt(0)==="/",splitPath:e=>{var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return r.exec(e).slice(1)},normalizeArray:(e,r)=>{for(var t=0,n=e.length-1;n>=0;n--){var a=e[n];a==="."?e.splice(n,1):a===".."?(e.splice(n,1),t++):t&&(e.splice(n,1),t--)}if(r)for(;t;t--)e.unshift("..");return e},normalize:e=>{var r=L.isAbs(e),t=e.substr(-1)==="/";return e=L.normalizeArray(e.split("/").filter(n=>!!n),!r).join("/"),!e&&!r&&(e="."),e&&t&&(e+="/"),(r?"/":"")+e},dirname:e=>{var r=L.splitPath(e),t=r[0],n=r[1];return!t&&!n?".":(n&&(n=n.substr(0,n.length-1)),t+n)},basename:e=>{if(e==="/")return"/";e=L.normalize(e),e=e.replace(/\/$/,"");var r=e.lastIndexOf("/");return r===-1?e:e.substr(r+1)},join:function(){var e=Array.prototype.slice.call(arguments);return L.normalize(e.join("/"))},join2:(e,r)=>L.normalize(e+"/"+r)},Ut=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return n=>crypto.getRandomValues(n);if(se)try{var e=require("crypto"),r=e.randomFillSync;if(r)return n=>e.randomFillSync(n);var t=e.randomBytes;return n=>(n.set(t(n.byteLength)),n)}catch{}te("initRandomDevice")},Wr=e=>(Wr=Ut())(e),N={resolve:function(){for(var e="",r=!1,t=arguments.length-1;t>=-1&&!r;t--){var n=t>=0?arguments[t]:i.cwd();if(typeof n!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!n)return"";e=n+"/"+e,r=L.isAbs(n)}return e=L.normalizeArray(e.split("/").filter(a=>!!a),!r).join("/"),(r?"/":"")+e||"."},relative:(e,r)=>{e=N.resolve(e).substr(1),r=N.resolve(r).substr(1);function t(c){for(var v=0;v<c.length&&c[v]==="";v++);for(var m=c.length-1;m>=0&&c[m]==="";m--);return v>m?[]:c.slice(v,m-v+1)}for(var n=t(e.split("/")),a=t(r.split("/")),o=Math.min(n.length,a.length),s=o,l=0;l<o;l++)if(n[l]!==a[l]){s=l;break}for(var d=[],l=s;l<n.length;l++)d.push("..");return d=d.concat(a.slice(s)),d.join("/")}},Br=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,ae=(e,r,t)=>{for(var n=r+t,a=r;e[a]&&!(a>=n);)++a;if(a-r>16&&e.buffer&&Br)return Br.decode(e.subarray(r,a));for(var o="";r<a;){var s=e[r++];if(!(s&128)){o+=String.fromCharCode(s);continue}var l=e[r++]&63;if((s&224)==192){o+=String.fromCharCode((s&31)<<6|l);continue}var d=e[r++]&63;if((s&240)==224?s=(s&15)<<12|l<<6|d:s=(s&7)<<18|l<<12|d<<6|e[r++]&63,s<65536)o+=String.fromCharCode(s);else{var c=s-65536;o+=String.fromCharCode(55296|c>>10,56320|c&1023)}}return o},sr=[],Me=e=>{for(var r=0,t=0;t<e.length;++t){var n=e.charCodeAt(t);n<=127?r++:n<=2047?r+=2:n>=55296&&n<=57343?(r+=4,++t):r+=3}return r},ur=(e,r,t,n)=>{if(!(n>0))return 0;for(var a=t,o=t+n-1,s=0;s<e.length;++s){var l=e.charCodeAt(s);if(l>=55296&&l<=57343){var d=e.charCodeAt(++s);l=65536+((l&1023)<<10)|d&1023}if(l<=127){if(t>=o)break;r[t++]=l}else if(l<=2047){if(t+1>=o)break;r[t++]=192|l>>6,r[t++]=128|l&63}else if(l<=65535){if(t+2>=o)break;r[t++]=224|l>>12,r[t++]=128|l>>6&63,r[t++]=128|l&63}else{if(t+3>=o)break;r[t++]=240|l>>18,r[t++]=128|l>>12&63,r[t++]=128|l>>6&63,r[t++]=128|l&63}}return r[t]=0,t-a};function Re(e,r,t){var n=t>0?t:Me(e)+1,a=new Array(n),o=ur(e,a,0,a.length);return r&&(a.length=o),a}var Vt=()=>{if(!sr.length){var e=null;if(se){var r=256,t=Buffer.alloc(r),n=0,a=process.stdin.fd;try{n=tr.readSync(a,t)}catch(o){if(o.toString().includes("EOF"))n=0;else throw o}n>0?e=t.slice(0,n).toString("utf-8"):e=null}else typeof window<"u"&&typeof window.prompt=="function"?(e=window.prompt("Input: "),e!==null&&(e+=`
`)):typeof readline=="function"&&(e=readline(),e!==null&&(e+=`
`));if(!e)return null;sr=Re(e,!0)}return sr.shift()},K={ttys:[],init(){},shutdown(){},register(e,r){K.ttys[e]={input:[],output:[],ops:r},i.registerDevice(e,K.stream_ops)},stream_ops:{open(e){var r=K.ttys[e.node.rdev];if(!r)throw new i.ErrnoError(43);e.tty=r,e.seekable=!1},close(e){e.tty.ops.fsync(e.tty)},fsync(e){e.tty.ops.fsync(e.tty)},read(e,r,t,n,a){if(!e.tty||!e.tty.ops.get_char)throw new i.ErrnoError(60);for(var o=0,s=0;s<n;s++){var l;try{l=e.tty.ops.get_char(e.tty)}catch{throw new i.ErrnoError(29)}if(l===void 0&&o===0)throw new i.ErrnoError(6);if(l==null)break;o++,r[t+s]=l}return o&&(e.node.timestamp=Date.now()),o},write(e,r,t,n,a){if(!e.tty||!e.tty.ops.put_char)throw new i.ErrnoError(60);try{for(var o=0;o<n;o++)e.tty.ops.put_char(e.tty,r[t+o])}catch{throw new i.ErrnoError(29)}return n&&(e.node.timestamp=Date.now()),o}},default_tty_ops:{get_char(e){return Vt()},put_char(e,r){r===null||r===10?(ar(ae(e.output,0)),e.output=[]):r!=0&&e.output.push(r)},fsync(e){e.output&&e.output.length>0&&(ar(ae(e.output,0)),e.output=[])},ioctl_tcgets(e){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(e,r,t){return 0},ioctl_tiocgwinsz(e){return[24,80]}},default_tty1_ops:{put_char(e,r){r===null||r===10?(H(ae(e.output,0)),e.output=[]):r!=0&&e.output.push(r)},fsync(e){e.output&&e.output.length>0&&(H(ae(e.output,0)),e.output=[])}}},Hr=e=>{te()},b={ops_table:null,mount(e){return b.createNode(null,"/",16895,0)},createNode(e,r,t,n){if(i.isBlkdev(t)||i.isFIFO(t))throw new i.ErrnoError(63);b.ops_table||(b.ops_table={dir:{node:{getattr:b.node_ops.getattr,setattr:b.node_ops.setattr,lookup:b.node_ops.lookup,mknod:b.node_ops.mknod,rename:b.node_ops.rename,unlink:b.node_ops.unlink,rmdir:b.node_ops.rmdir,readdir:b.node_ops.readdir,symlink:b.node_ops.symlink},stream:{llseek:b.stream_ops.llseek}},file:{node:{getattr:b.node_ops.getattr,setattr:b.node_ops.setattr},stream:{llseek:b.stream_ops.llseek,read:b.stream_ops.read,write:b.stream_ops.write,allocate:b.stream_ops.allocate,mmap:b.stream_ops.mmap,msync:b.stream_ops.msync}},link:{node:{getattr:b.node_ops.getattr,setattr:b.node_ops.setattr,readlink:b.node_ops.readlink},stream:{}},chrdev:{node:{getattr:b.node_ops.getattr,setattr:b.node_ops.setattr},stream:i.chrdev_stream_ops}});var a=i.createNode(e,r,t,n);return i.isDir(a.mode)?(a.node_ops=b.ops_table.dir.node,a.stream_ops=b.ops_table.dir.stream,a.contents={}):i.isFile(a.mode)?(a.node_ops=b.ops_table.file.node,a.stream_ops=b.ops_table.file.stream,a.usedBytes=0,a.contents=null):i.isLink(a.mode)?(a.node_ops=b.ops_table.link.node,a.stream_ops=b.ops_table.link.stream):i.isChrdev(a.mode)&&(a.node_ops=b.ops_table.chrdev.node,a.stream_ops=b.ops_table.chrdev.stream),a.timestamp=Date.now(),e&&(e.contents[r]=a,e.timestamp=a.timestamp),a},getFileDataAsTypedArray(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage(e,r){var t=e.contents?e.contents.length:0;if(!(t>=r)){var n=1024*1024;r=Math.max(r,t*(t<n?2:1.125)>>>0),t!=0&&(r=Math.max(r,256));var a=e.contents;e.contents=new Uint8Array(r),e.usedBytes>0&&e.contents.set(a.subarray(0,e.usedBytes),0)}},resizeFileStorage(e,r){if(e.usedBytes!=r)if(r==0)e.contents=null,e.usedBytes=0;else{var t=e.contents;e.contents=new Uint8Array(r),t&&e.contents.set(t.subarray(0,Math.min(r,e.usedBytes))),e.usedBytes=r}},node_ops:{getattr(e){var r={};return r.dev=i.isChrdev(e.mode)?e.id:1,r.ino=e.id,r.mode=e.mode,r.nlink=1,r.uid=0,r.gid=0,r.rdev=e.rdev,i.isDir(e.mode)?r.size=4096:i.isFile(e.mode)?r.size=e.usedBytes:i.isLink(e.mode)?r.size=e.link.length:r.size=0,r.atime=new Date(e.timestamp),r.mtime=new Date(e.timestamp),r.ctime=new Date(e.timestamp),r.blksize=4096,r.blocks=Math.ceil(r.size/r.blksize),r},setattr(e,r){r.mode!==void 0&&(e.mode=r.mode),r.timestamp!==void 0&&(e.timestamp=r.timestamp),r.size!==void 0&&b.resizeFileStorage(e,r.size)},lookup(e,r){throw i.genericErrors[44]},mknod(e,r,t,n){return b.createNode(e,r,t,n)},rename(e,r,t){if(i.isDir(e.mode)){var n;try{n=i.lookupNode(r,t)}catch{}if(n)for(var a in n.contents)throw new i.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=t,r.contents[t]=e,r.timestamp=e.parent.timestamp,e.parent=r},unlink(e,r){delete e.contents[r],e.timestamp=Date.now()},rmdir(e,r){var t=i.lookupNode(e,r);for(var n in t.contents)throw new i.ErrnoError(55);delete e.contents[r],e.timestamp=Date.now()},readdir(e){var r=[".",".."];for(var t in e.contents)e.contents.hasOwnProperty(t)&&r.push(t);return r},symlink(e,r,t){var n=b.createNode(e,r,41471,0);return n.link=t,n},readlink(e){if(!i.isLink(e.mode))throw new i.ErrnoError(28);return e.link}},stream_ops:{read(e,r,t,n,a){var o=e.node.contents;if(a>=e.node.usedBytes)return 0;var s=Math.min(e.node.usedBytes-a,n);if(s>8&&o.subarray)r.set(o.subarray(a,a+s),t);else for(var l=0;l<s;l++)r[t+l]=o[a+l];return s},write(e,r,t,n,a,o){if(r.buffer===O.buffer&&(o=!1),!n)return 0;var s=e.node;if(s.timestamp=Date.now(),r.subarray&&(!s.contents||s.contents.subarray)){if(o)return s.contents=r.subarray(t,t+n),s.usedBytes=n,n;if(s.usedBytes===0&&a===0)return s.contents=r.slice(t,t+n),s.usedBytes=n,n;if(a+n<=s.usedBytes)return s.contents.set(r.subarray(t,t+n),a),n}if(b.expandFileStorage(s,a+n),s.contents.subarray&&r.subarray)s.contents.set(r.subarray(t,t+n),a);else for(var l=0;l<n;l++)s.contents[a+l]=r[t+l];return s.usedBytes=Math.max(s.usedBytes,a+n),n},llseek(e,r,t){var n=r;if(t===1?n+=e.position:t===2&&i.isFile(e.node.mode)&&(n+=e.node.usedBytes),n<0)throw new i.ErrnoError(28);return n},allocate(e,r,t){b.expandFileStorage(e.node,r+t),e.node.usedBytes=Math.max(e.node.usedBytes,r+t)},mmap(e,r,t,n,a){if(!i.isFile(e.node.mode))throw new i.ErrnoError(43);var o,s,l=e.node.contents;if(!(a&2)&&l.buffer===O.buffer)s=!1,o=l.byteOffset;else{if((t>0||t+r<l.length)&&(l.subarray?l=l.subarray(t,t+r):l=Array.prototype.slice.call(l,t,t+r)),s=!0,o=Hr(r),!o)throw new i.ErrnoError(48);O.set(l,o)}return{ptr:o,allocated:s}},msync(e,r,t,n,a){return b.stream_ops.write(e,r,0,n,t,!1),0}}},It=(e,r,t,n)=>{var a=n?"":`al ${e}`;le(e,o=>{De(o,`Loading data file "${e}" failed (no arrayBuffer).`),r(new Uint8Array(o)),a&&ve(a)},o=>{if(t)t();else throw`Loading data file "${e}" failed.`}),a&&$e(a)},Wt=(e,r,t,n,a,o)=>i.createDataFile(e,r,t,n,a,o),lr=u.preloadPlugins||[],Bt=(e,r,t,n)=>{typeof f<"u"&&f.init();var a=!1;return lr.forEach(o=>{a||o.canHandle(r)&&(o.handle(e,r,t,n),a=!0)}),a},Ht=(e,r,t,n,a,o,s,l,d,c)=>{var v=r?N.resolve(L.join2(e,r)):e,m=`cp ${v}`;function p(g){function w(E){c&&c(),l||Wt(e,r,E,n,a,d),o&&o(),ve(m)}Bt(g,v,w,()=>{s&&s(),ve(m)})||w(g)}$e(m),typeof t=="string"?It(t,g=>p(g),s):p(t)},qt=e=>{var r={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},t=r[e];if(typeof t>"u")throw new Error(`Unknown file open mode: ${e}`);return t},dr=(e,r)=>{var t=0;return e&&(t|=365),r&&(t|=146),t},i={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath(e,r={}){if(e=N.resolve(e),!e)return{path:"",node:null};var t={follow_mount:!0,recurse_count:0};if(r=Object.assign(t,r),r.recurse_count>8)throw new i.ErrnoError(32);for(var n=e.split("/").filter(m=>!!m),a=i.root,o="/",s=0;s<n.length;s++){var l=s===n.length-1;if(l&&r.parent)break;if(a=i.lookupNode(a,n[s]),o=L.join2(o,n[s]),i.isMountpoint(a)&&(!l||l&&r.follow_mount)&&(a=a.mounted.root),!l||r.follow)for(var d=0;i.isLink(a.mode);){var c=i.readlink(o);o=N.resolve(L.dirname(o),c);var v=i.lookupPath(o,{recurse_count:r.recurse_count+1});if(a=v.node,d++>40)throw new i.ErrnoError(32)}}return{path:o,node:a}},getPath(e){for(var r;;){if(i.isRoot(e)){var t=e.mount.mountpoint;return r?t[t.length-1]!=="/"?`${t}/${r}`:t+r:t}r=r?`${e.name}/${r}`:e.name,e=e.parent}},hashName(e,r){for(var t=0,n=0;n<r.length;n++)t=(t<<5)-t+r.charCodeAt(n)|0;return(e+t>>>0)%i.nameTable.length},hashAddNode(e){var r=i.hashName(e.parent.id,e.name);e.name_next=i.nameTable[r],i.nameTable[r]=e},hashRemoveNode(e){var r=i.hashName(e.parent.id,e.name);if(i.nameTable[r]===e)i.nameTable[r]=e.name_next;else for(var t=i.nameTable[r];t;){if(t.name_next===e){t.name_next=e.name_next;break}t=t.name_next}},lookupNode(e,r){var t=i.mayLookup(e);if(t)throw new i.ErrnoError(t,e);for(var n=i.hashName(e.id,r),a=i.nameTable[n];a;a=a.name_next){var o=a.name;if(a.parent.id===e.id&&o===r)return a}return i.lookup(e,r)},createNode(e,r,t,n){var a=new i.FSNode(e,r,t,n);return i.hashAddNode(a),a},destroyNode(e){i.hashRemoveNode(e)},isRoot(e){return e===e.parent},isMountpoint(e){return!!e.mounted},isFile(e){return(e&61440)===32768},isDir(e){return(e&61440)===16384},isLink(e){return(e&61440)===40960},isChrdev(e){return(e&61440)===8192},isBlkdev(e){return(e&61440)===24576},isFIFO(e){return(e&61440)===4096},isSocket(e){return(e&49152)===49152},flagsToPermissionString(e){var r=["r","w","rw"][e&3];return e&512&&(r+="w"),r},nodePermissions(e,r){return i.ignorePermissions?0:r.includes("r")&&!(e.mode&292)||r.includes("w")&&!(e.mode&146)||r.includes("x")&&!(e.mode&73)?2:0},mayLookup(e){var r=i.nodePermissions(e,"x");return r||(e.node_ops.lookup?0:2)},mayCreate(e,r){try{var t=i.lookupNode(e,r);return 20}catch{}return i.nodePermissions(e,"wx")},mayDelete(e,r,t){var n;try{n=i.lookupNode(e,r)}catch(o){return o.errno}var a=i.nodePermissions(e,"wx");if(a)return a;if(t){if(!i.isDir(n.mode))return 54;if(i.isRoot(n)||i.getPath(n)===i.cwd())return 10}else if(i.isDir(n.mode))return 31;return 0},mayOpen(e,r){return e?i.isLink(e.mode)?32:i.isDir(e.mode)&&(i.flagsToPermissionString(r)!=="r"||r&512)?31:i.nodePermissions(e,i.flagsToPermissionString(r)):44},MAX_OPEN_FDS:4096,nextfd(){for(var e=0;e<=i.MAX_OPEN_FDS;e++)if(!i.streams[e])return e;throw new i.ErrnoError(33)},getStreamChecked(e){var r=i.getStream(e);if(!r)throw new i.ErrnoError(8);return r},getStream:e=>i.streams[e],createStream(e,r=-1){return i.FSStream||(i.FSStream=function(){this.shared={}},i.FSStream.prototype={},Object.defineProperties(i.FSStream.prototype,{object:{get(){return this.node},set(t){this.node=t}},isRead:{get(){return(this.flags&2097155)!==1}},isWrite:{get(){return(this.flags&2097155)!==0}},isAppend:{get(){return this.flags&1024}},flags:{get(){return this.shared.flags},set(t){this.shared.flags=t}},position:{get(){return this.shared.position},set(t){this.shared.position=t}}})),e=Object.assign(new i.FSStream,e),r==-1&&(r=i.nextfd()),e.fd=r,i.streams[r]=e,e},closeStream(e){i.streams[e]=null},chrdev_stream_ops:{open(e){var r=i.getDevice(e.node.rdev);e.stream_ops=r.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek(){throw new i.ErrnoError(70)}},major:e=>e>>8,minor:e=>e&255,makedev:(e,r)=>e<<8|r,registerDevice(e,r){i.devices[e]={stream_ops:r}},getDevice:e=>i.devices[e],getMounts(e){for(var r=[],t=[e];t.length;){var n=t.pop();r.push(n),t.push.apply(t,n.mounts)}return r},syncfs(e,r){typeof e=="function"&&(r=e,e=!1),i.syncFSRequests++,i.syncFSRequests>1&&H(`warning: ${i.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var t=i.getMounts(i.root.mount),n=0;function a(s){return i.syncFSRequests--,r(s)}function o(s){if(s)return o.errored?void 0:(o.errored=!0,a(s));++n>=t.length&&a(null)}t.forEach(s=>{if(!s.type.syncfs)return o(null);s.type.syncfs(s,e,o)})},mount(e,r,t){var n=t==="/",a=!t,o;if(n&&i.root)throw new i.ErrnoError(10);if(!n&&!a){var s=i.lookupPath(t,{follow_mount:!1});if(t=s.path,o=s.node,i.isMountpoint(o))throw new i.ErrnoError(10);if(!i.isDir(o.mode))throw new i.ErrnoError(54)}var l={type:e,opts:r,mountpoint:t,mounts:[]},d=e.mount(l);return d.mount=l,l.root=d,n?i.root=d:o&&(o.mounted=l,o.mount&&o.mount.mounts.push(l)),d},unmount(e){var r=i.lookupPath(e,{follow_mount:!1});if(!i.isMountpoint(r.node))throw new i.ErrnoError(28);var t=r.node,n=t.mounted,a=i.getMounts(n);Object.keys(i.nameTable).forEach(s=>{for(var l=i.nameTable[s];l;){var d=l.name_next;a.includes(l.mount)&&i.destroyNode(l),l=d}}),t.mounted=null;var o=t.mount.mounts.indexOf(n);t.mount.mounts.splice(o,1)},lookup(e,r){return e.node_ops.lookup(e,r)},mknod(e,r,t){var n=i.lookupPath(e,{parent:!0}),a=n.node,o=L.basename(e);if(!o||o==="."||o==="..")throw new i.ErrnoError(28);var s=i.mayCreate(a,o);if(s)throw new i.ErrnoError(s);if(!a.node_ops.mknod)throw new i.ErrnoError(63);return a.node_ops.mknod(a,o,r,t)},create(e,r){return r=r!==void 0?r:438,r&=4095,r|=32768,i.mknod(e,r,0)},mkdir(e,r){return r=r!==void 0?r:511,r&=1023,r|=16384,i.mknod(e,r,0)},mkdirTree(e,r){for(var t=e.split("/"),n="",a=0;a<t.length;++a)if(t[a]){n+="/"+t[a];try{i.mkdir(n,r)}catch(o){if(o.errno!=20)throw o}}},mkdev(e,r,t){return typeof t>"u"&&(t=r,r=438),r|=8192,i.mknod(e,r,t)},symlink(e,r){if(!N.resolve(e))throw new i.ErrnoError(44);var t=i.lookupPath(r,{parent:!0}),n=t.node;if(!n)throw new i.ErrnoError(44);var a=L.basename(r),o=i.mayCreate(n,a);if(o)throw new i.ErrnoError(o);if(!n.node_ops.symlink)throw new i.ErrnoError(63);return n.node_ops.symlink(n,a,e)},rename(e,r){var t=L.dirname(e),n=L.dirname(r),a=L.basename(e),o=L.basename(r),s,l,d;if(s=i.lookupPath(e,{parent:!0}),l=s.node,s=i.lookupPath(r,{parent:!0}),d=s.node,!l||!d)throw new i.ErrnoError(44);if(l.mount!==d.mount)throw new i.ErrnoError(75);var c=i.lookupNode(l,a),v=N.relative(e,n);if(v.charAt(0)!==".")throw new i.ErrnoError(28);if(v=N.relative(r,t),v.charAt(0)!==".")throw new i.ErrnoError(55);var m;try{m=i.lookupNode(d,o)}catch{}if(c!==m){var p=i.isDir(c.mode),g=i.mayDelete(l,a,p);if(g)throw new i.ErrnoError(g);if(g=m?i.mayDelete(d,o,p):i.mayCreate(d,o),g)throw new i.ErrnoError(g);if(!l.node_ops.rename)throw new i.ErrnoError(63);if(i.isMountpoint(c)||m&&i.isMountpoint(m))throw new i.ErrnoError(10);if(d!==l&&(g=i.nodePermissions(l,"w"),g))throw new i.ErrnoError(g);i.hashRemoveNode(c);try{l.node_ops.rename(c,d,o)}catch(w){throw w}finally{i.hashAddNode(c)}}},rmdir(e){var r=i.lookupPath(e,{parent:!0}),t=r.node,n=L.basename(e),a=i.lookupNode(t,n),o=i.mayDelete(t,n,!0);if(o)throw new i.ErrnoError(o);if(!t.node_ops.rmdir)throw new i.ErrnoError(63);if(i.isMountpoint(a))throw new i.ErrnoError(10);t.node_ops.rmdir(t,n),i.destroyNode(a)},readdir(e){var r=i.lookupPath(e,{follow:!0}),t=r.node;if(!t.node_ops.readdir)throw new i.ErrnoError(54);return t.node_ops.readdir(t)},unlink(e){var r=i.lookupPath(e,{parent:!0}),t=r.node;if(!t)throw new i.ErrnoError(44);var n=L.basename(e),a=i.lookupNode(t,n),o=i.mayDelete(t,n,!1);if(o)throw new i.ErrnoError(o);if(!t.node_ops.unlink)throw new i.ErrnoError(63);if(i.isMountpoint(a))throw new i.ErrnoError(10);t.node_ops.unlink(t,n),i.destroyNode(a)},readlink(e){var r=i.lookupPath(e),t=r.node;if(!t)throw new i.ErrnoError(44);if(!t.node_ops.readlink)throw new i.ErrnoError(28);return N.resolve(i.getPath(t.parent),t.node_ops.readlink(t))},stat(e,r){var t=i.lookupPath(e,{follow:!r}),n=t.node;if(!n)throw new i.ErrnoError(44);if(!n.node_ops.getattr)throw new i.ErrnoError(63);return n.node_ops.getattr(n)},lstat(e){return i.stat(e,!0)},chmod(e,r,t){var n;if(typeof e=="string"){var a=i.lookupPath(e,{follow:!t});n=a.node}else n=e;if(!n.node_ops.setattr)throw new i.ErrnoError(63);n.node_ops.setattr(n,{mode:r&4095|n.mode&-4096,timestamp:Date.now()})},lchmod(e,r){i.chmod(e,r,!0)},fchmod(e,r){var t=i.getStreamChecked(e);i.chmod(t.node,r)},chown(e,r,t,n){var a;if(typeof e=="string"){var o=i.lookupPath(e,{follow:!n});a=o.node}else a=e;if(!a.node_ops.setattr)throw new i.ErrnoError(63);a.node_ops.setattr(a,{timestamp:Date.now()})},lchown(e,r,t){i.chown(e,r,t,!0)},fchown(e,r,t){var n=i.getStreamChecked(e);i.chown(n.node,r,t)},truncate(e,r){if(r<0)throw new i.ErrnoError(28);var t;if(typeof e=="string"){var n=i.lookupPath(e,{follow:!0});t=n.node}else t=e;if(!t.node_ops.setattr)throw new i.ErrnoError(63);if(i.isDir(t.mode))throw new i.ErrnoError(31);if(!i.isFile(t.mode))throw new i.ErrnoError(28);var a=i.nodePermissions(t,"w");if(a)throw new i.ErrnoError(a);t.node_ops.setattr(t,{size:r,timestamp:Date.now()})},ftruncate(e,r){var t=i.getStreamChecked(e);if(!(t.flags&2097155))throw new i.ErrnoError(28);i.truncate(t.node,r)},utime(e,r,t){var n=i.lookupPath(e,{follow:!0}),a=n.node;a.node_ops.setattr(a,{timestamp:Math.max(r,t)})},open(e,r,t){if(e==="")throw new i.ErrnoError(44);r=typeof r=="string"?qt(r):r,t=typeof t>"u"?438:t,r&64?t=t&4095|32768:t=0;var n;if(typeof e=="object")n=e;else{e=L.normalize(e);try{var a=i.lookupPath(e,{follow:!(r&131072)});n=a.node}catch{}}var o=!1;if(r&64)if(n){if(r&128)throw new i.ErrnoError(20)}else n=i.mknod(e,t,0),o=!0;if(!n)throw new i.ErrnoError(44);if(i.isChrdev(n.mode)&&(r&=-513),r&65536&&!i.isDir(n.mode))throw new i.ErrnoError(54);if(!o){var s=i.mayOpen(n,r);if(s)throw new i.ErrnoError(s)}r&512&&!o&&i.truncate(n,0),r&=-131713;var l=i.createStream({node:n,path:i.getPath(n),flags:r,seekable:!0,position:0,stream_ops:n.stream_ops,ungotten:[],error:!1});return l.stream_ops.open&&l.stream_ops.open(l),u.logReadFiles&&!(r&1)&&(i.readFiles||(i.readFiles={}),e in i.readFiles||(i.readFiles[e]=1)),l},close(e){if(i.isClosed(e))throw new i.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(r){throw r}finally{i.closeStream(e.fd)}e.fd=null},isClosed(e){return e.fd===null},llseek(e,r,t){if(i.isClosed(e))throw new i.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new i.ErrnoError(70);if(t!=0&&t!=1&&t!=2)throw new i.ErrnoError(28);return e.position=e.stream_ops.llseek(e,r,t),e.ungotten=[],e.position},read(e,r,t,n,a){if(n<0||a<0)throw new i.ErrnoError(28);if(i.isClosed(e))throw new i.ErrnoError(8);if((e.flags&2097155)===1)throw new i.ErrnoError(8);if(i.isDir(e.node.mode))throw new i.ErrnoError(31);if(!e.stream_ops.read)throw new i.ErrnoError(28);var o=typeof a<"u";if(!o)a=e.position;else if(!e.seekable)throw new i.ErrnoError(70);var s=e.stream_ops.read(e,r,t,n,a);return o||(e.position+=s),s},write(e,r,t,n,a,o){if(n<0||a<0)throw new i.ErrnoError(28);if(i.isClosed(e))throw new i.ErrnoError(8);if(!(e.flags&2097155))throw new i.ErrnoError(8);if(i.isDir(e.node.mode))throw new i.ErrnoError(31);if(!e.stream_ops.write)throw new i.ErrnoError(28);e.seekable&&e.flags&1024&&i.llseek(e,0,2);var s=typeof a<"u";if(!s)a=e.position;else if(!e.seekable)throw new i.ErrnoError(70);var l=e.stream_ops.write(e,r,t,n,a,o);return s||(e.position+=l),l},allocate(e,r,t){if(i.isClosed(e))throw new i.ErrnoError(8);if(r<0||t<=0)throw new i.ErrnoError(28);if(!(e.flags&2097155))throw new i.ErrnoError(8);if(!i.isFile(e.node.mode)&&!i.isDir(e.node.mode))throw new i.ErrnoError(43);if(!e.stream_ops.allocate)throw new i.ErrnoError(138);e.stream_ops.allocate(e,r,t)},mmap(e,r,t,n,a){if(n&2&&!(a&2)&&(e.flags&2097155)!==2)throw new i.ErrnoError(2);if((e.flags&2097155)===1)throw new i.ErrnoError(2);if(!e.stream_ops.mmap)throw new i.ErrnoError(43);return e.stream_ops.mmap(e,r,t,n,a)},msync(e,r,t,n,a){return e.stream_ops.msync?e.stream_ops.msync(e,r,t,n,a):0},munmap:e=>0,ioctl(e,r,t){if(!e.stream_ops.ioctl)throw new i.ErrnoError(59);return e.stream_ops.ioctl(e,r,t)},readFile(e,r={}){if(r.flags=r.flags||0,r.encoding=r.encoding||"binary",r.encoding!=="utf8"&&r.encoding!=="binary")throw new Error(`Invalid encoding type "${r.encoding}"`);var t,n=i.open(e,r.flags),a=i.stat(e),o=a.size,s=new Uint8Array(o);return i.read(n,s,0,o,0),r.encoding==="utf8"?t=ae(s,0):r.encoding==="binary"&&(t=s),i.close(n),t},writeFile(e,r,t={}){t.flags=t.flags||577;var n=i.open(e,t.flags,t.mode);if(typeof r=="string"){var a=new Uint8Array(Me(r)+1),o=ur(r,a,0,a.length);i.write(n,a,0,o,void 0,t.canOwn)}else if(ArrayBuffer.isView(r))i.write(n,r,0,r.byteLength,void 0,t.canOwn);else throw new Error("Unsupported data type");i.close(n)},cwd:()=>i.currentPath,chdir(e){var r=i.lookupPath(e,{follow:!0});if(r.node===null)throw new i.ErrnoError(44);if(!i.isDir(r.node.mode))throw new i.ErrnoError(54);var t=i.nodePermissions(r.node,"x");if(t)throw new i.ErrnoError(t);i.currentPath=r.path},createDefaultDirectories(){i.mkdir("/tmp"),i.mkdir("/home"),i.mkdir("/home/web_user")},createDefaultDevices(){i.mkdir("/dev"),i.registerDevice(i.makedev(1,3),{read:()=>0,write:(n,a,o,s,l)=>s}),i.mkdev("/dev/null",i.makedev(1,3)),K.register(i.makedev(5,0),K.default_tty_ops),K.register(i.makedev(6,0),K.default_tty1_ops),i.mkdev("/dev/tty",i.makedev(5,0)),i.mkdev("/dev/tty1",i.makedev(6,0));var e=new Uint8Array(1024),r=0,t=()=>(r===0&&(r=Wr(e).byteLength),e[--r]);i.createDevice("/dev","random",t),i.createDevice("/dev","urandom",t),i.mkdir("/dev/shm"),i.mkdir("/dev/shm/tmp")},createSpecialDirectories(){i.mkdir("/proc");var e=i.mkdir("/proc/self");i.mkdir("/proc/self/fd"),i.mount({mount(){var r=i.createNode(e,"fd",16895,73);return r.node_ops={lookup(t,n){var a=+n,o=i.getStreamChecked(a),s={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>o.path}};return s.parent=s,s}},r}},{},"/proc/self/fd")},createStandardStreams(){u.stdin?i.createDevice("/dev","stdin",u.stdin):i.symlink("/dev/tty","/dev/stdin"),u.stdout?i.createDevice("/dev","stdout",null,u.stdout):i.symlink("/dev/tty","/dev/stdout"),u.stderr?i.createDevice("/dev","stderr",null,u.stderr):i.symlink("/dev/tty1","/dev/stderr");var e=i.open("/dev/stdin",0),r=i.open("/dev/stdout",1),t=i.open("/dev/stderr",1)},ensureErrnoError(){i.ErrnoError||(i.ErrnoError=function(r,t){this.name="ErrnoError",this.node=t,this.setErrno=function(n){this.errno=n},this.setErrno(r),this.message="FS error"},i.ErrnoError.prototype=new Error,i.ErrnoError.prototype.constructor=i.ErrnoError,[44].forEach(e=>{i.genericErrors[e]=new i.ErrnoError(e),i.genericErrors[e].stack="<generic error, no stack>"}))},staticInit(){i.ensureErrnoError(),i.nameTable=new Array(4096),i.mount(b,{},"/"),i.createDefaultDirectories(),i.createDefaultDevices(),i.createSpecialDirectories(),i.filesystems={MEMFS:b}},init(e,r,t){i.init.initialized=!0,i.ensureErrnoError(),u.stdin=e||u.stdin,u.stdout=r||u.stdout,u.stderr=t||u.stderr,i.createStandardStreams()},quit(){i.init.initialized=!1;for(var e=0;e<i.streams.length;e++){var r=i.streams[e];r&&i.close(r)}},findObject(e,r){var t=i.analyzePath(e,r);return t.exists?t.object:null},analyzePath(e,r){try{var t=i.lookupPath(e,{follow:!r});e=t.path}catch{}var n={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var t=i.lookupPath(e,{parent:!0});n.parentExists=!0,n.parentPath=t.path,n.parentObject=t.node,n.name=L.basename(e),t=i.lookupPath(e,{follow:!r}),n.exists=!0,n.path=t.path,n.object=t.node,n.name=t.node.name,n.isRoot=t.path==="/"}catch(a){n.error=a.errno}return n},createPath(e,r,t,n){e=typeof e=="string"?e:i.getPath(e);for(var a=r.split("/").reverse();a.length;){var o=a.pop();if(o){var s=L.join2(e,o);try{i.mkdir(s)}catch{}e=s}}return s},createFile(e,r,t,n,a){var o=L.join2(typeof e=="string"?e:i.getPath(e),r),s=dr(n,a);return i.create(o,s)},createDataFile(e,r,t,n,a,o){var s=r;e&&(e=typeof e=="string"?e:i.getPath(e),s=r?L.join2(e,r):e);var l=dr(n,a),d=i.create(s,l);if(t){if(typeof t=="string"){for(var c=new Array(t.length),v=0,m=t.length;v<m;++v)c[v]=t.charCodeAt(v);t=c}i.chmod(d,l|146);var p=i.open(d,577);i.write(p,t,0,t.length,0,o),i.close(p),i.chmod(d,l)}return d},createDevice(e,r,t,n){var a=L.join2(typeof e=="string"?e:i.getPath(e),r),o=dr(!!t,!!n);i.createDevice.major||(i.createDevice.major=64);var s=i.makedev(i.createDevice.major++,0);return i.registerDevice(s,{open(l){l.seekable=!1},close(l){n&&n.buffer&&n.buffer.length&&n(10)},read(l,d,c,v,m){for(var p=0,g=0;g<v;g++){var w;try{w=t()}catch{throw new i.ErrnoError(29)}if(w===void 0&&p===0)throw new i.ErrnoError(6);if(w==null)break;p++,d[c+g]=w}return p&&(l.node.timestamp=Date.now()),p},write(l,d,c,v,m){for(var p=0;p<v;p++)try{n(d[c+p])}catch{throw new i.ErrnoError(29)}return v&&(l.node.timestamp=Date.now()),p}}),i.mkdev(a,o,s)},forceLoadFile(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(ue)try{e.contents=Re(ue(e.url),!0),e.usedBytes=e.contents.length}catch{throw new i.ErrnoError(29)}else throw new Error("Cannot load without read() or XMLHttpRequest.")},createLazyFile(e,r,t,n,a){function o(){this.lengthKnown=!1,this.chunks=[]}if(o.prototype.get=function(g){if(!(g>this.length-1||g<0)){var w=g%this.chunkSize,E=g/this.chunkSize|0;return this.getter(E)[w]}},o.prototype.setDataGetter=function(g){this.getter=g},o.prototype.cacheLength=function(){var g=new XMLHttpRequest;if(g.open("HEAD",t,!1),g.send(null),!(g.status>=200&&g.status<300||g.status===304))throw new Error("Couldn't load "+t+". Status: "+g.status);var w=Number(g.getResponseHeader("Content-length")),E,C=(E=g.getResponseHeader("Accept-Ranges"))&&E==="bytes",k=(E=g.getResponseHeader("Content-Encoding"))&&E==="gzip",h=1024*1024;C||(h=w);var y=(D,j)=>{if(D>j)throw new Error("invalid range ("+D+", "+j+") or no bytes requested!");if(j>w-1)throw new Error("only "+w+" bytes available! programmer error!");var A=new XMLHttpRequest;if(A.open("GET",t,!1),w!==h&&A.setRequestHeader("Range","bytes="+D+"-"+j),A.responseType="arraybuffer",A.overrideMimeType&&A.overrideMimeType("text/plain; charset=x-user-defined"),A.send(null),!(A.status>=200&&A.status<300||A.status===304))throw new Error("Couldn't load "+t+". Status: "+A.status);return A.response!==void 0?new Uint8Array(A.response||[]):Re(A.responseText||"",!0)},$=this;$.setDataGetter(D=>{var j=D*h,A=(D+1)*h-1;if(A=Math.min(A,w-1),typeof $.chunks[D]>"u"&&($.chunks[D]=y(j,A)),typeof $.chunks[D]>"u")throw new Error("doXHR failed!");return $.chunks[D]}),(k||!w)&&(h=w=1,w=this.getter(0).length,h=w,ar("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=w,this._chunkSize=h,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){if(!J)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var s=new o;Object.defineProperties(s,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var l={isDevice:!1,contents:s}}else var l={isDevice:!1,url:t};var d=i.createFile(e,r,l,n,a);l.contents?d.contents=l.contents:l.url&&(d.contents=null,d.url=l.url),Object.defineProperties(d,{usedBytes:{get:function(){return this.contents.length}}});var c={},v=Object.keys(d.stream_ops);v.forEach(p=>{var g=d.stream_ops[p];c[p]=function(){return i.forceLoadFile(d),g.apply(null,arguments)}});function m(p,g,w,E,C){var k=p.node.contents;if(C>=k.length)return 0;var h=Math.min(k.length-C,E);if(k.slice)for(var y=0;y<h;y++)g[w+y]=k[C+y];else for(var y=0;y<h;y++)g[w+y]=k.get(C+y);return h}return c.read=(p,g,w,E,C)=>(i.forceLoadFile(d),m(p,g,w,E,C)),c.mmap=(p,g,w,E,C)=>{i.forceLoadFile(d);var k=Hr(g);if(!k)throw new i.ErrnoError(48);return m(p,O,k,g,w),{ptr:k,allocated:!0}},d.stream_ops=c,d}},me=(e,r)=>e?ae(V,e,r):"",M={DEFAULT_POLLMASK:5,calculateAt(e,r,t){if(L.isAbs(r))return r;var n;if(e===-100)n=i.cwd();else{var a=M.getStreamFromFD(e);n=a.path}if(r.length==0){if(!t)throw new i.ErrnoError(44);return n}return L.join2(n,r)},doStat(e,r,t){try{var n=e(r)}catch(l){if(l&&l.node&&L.normalize(r)!==L.normalize(i.getPath(l.node)))return-54;throw l}_[t>>2]=n.dev,_[t+4>>2]=n.mode,F[t+8>>2]=n.nlink,_[t+12>>2]=n.uid,_[t+16>>2]=n.gid,_[t+20>>2]=n.rdev,z=[n.size>>>0,(P=n.size,+Math.abs(P)>=1?P>0?+Math.floor(P/4294967296)>>>0:~~+Math.ceil((P-+(~~P>>>0))/4294967296)>>>0:0)],_[t+24>>2]=z[0],_[t+28>>2]=z[1],_[t+32>>2]=4096,_[t+36>>2]=n.blocks;var a=n.atime.getTime(),o=n.mtime.getTime(),s=n.ctime.getTime();return z=[Math.floor(a/1e3)>>>0,(P=Math.floor(a/1e3),+Math.abs(P)>=1?P>0?+Math.floor(P/4294967296)>>>0:~~+Math.ceil((P-+(~~P>>>0))/4294967296)>>>0:0)],_[t+40>>2]=z[0],_[t+44>>2]=z[1],F[t+48>>2]=a%1e3*1e3,z=[Math.floor(o/1e3)>>>0,(P=Math.floor(o/1e3),+Math.abs(P)>=1?P>0?+Math.floor(P/4294967296)>>>0:~~+Math.ceil((P-+(~~P>>>0))/4294967296)>>>0:0)],_[t+56>>2]=z[0],_[t+60>>2]=z[1],F[t+64>>2]=o%1e3*1e3,z=[Math.floor(s/1e3)>>>0,(P=Math.floor(s/1e3),+Math.abs(P)>=1?P>0?+Math.floor(P/4294967296)>>>0:~~+Math.ceil((P-+(~~P>>>0))/4294967296)>>>0:0)],_[t+72>>2]=z[0],_[t+76>>2]=z[1],F[t+80>>2]=s%1e3*1e3,z=[n.ino>>>0,(P=n.ino,+Math.abs(P)>=1?P>0?+Math.floor(P/4294967296)>>>0:~~+Math.ceil((P-+(~~P>>>0))/4294967296)>>>0:0)],_[t+88>>2]=z[0],_[t+92>>2]=z[1],0},doMsync(e,r,t,n,a){if(!i.isFile(r.node.mode))throw new i.ErrnoError(43);if(n&2)return 0;var o=V.slice(e,e+t);i.msync(r,o,a,t,n)},varargs:void 0,get(){var e=_[+M.varargs>>2];return M.varargs+=4,e},getp(){return M.get()},getStr(e){var r=me(e);return r},getStreamFromFD(e){var r=i.getStreamChecked(e);return r}},Yt=e=>{ce=e,jr()||(u.onExit&&u.onExit(e),re=!0),Fe(e,new Ir(e))},Nt=(e,r)=>{ce=e,Yt(e)},Xt=Nt,Gt=()=>{if(!jr())try{Xt(ce)}catch(e){Vr(e)}},cr=e=>{if(!re)try{e(),Gt()}catch(r){Vr(r)}},qr=(e,r)=>setTimeout(()=>{cr(e)},r),xe=e=>{xe.shown||(xe.shown={}),xe.shown[e]||(xe.shown[e]=1,se&&(e="warning: "+e),H(e))},f={mainLoop:{running:!1,scheduler:null,method:"",currentlyRunningMainloop:0,func:null,arg:0,timingMode:0,timingValue:0,currentFrameNumber:0,queue:[],pause(){f.mainLoop.scheduler=null,f.mainLoop.currentlyRunningMainloop++},resume(){f.mainLoop.currentlyRunningMainloop++;var e=f.mainLoop.timingMode,r=f.mainLoop.timingValue,t=f.mainLoop.func;f.mainLoop.func=null,zt(t,0,!1,f.mainLoop.arg,!0),or(e,r),f.mainLoop.scheduler()},updateStatus(){if(u.setStatus){var e=u.statusMessage||"Please wait...",r=f.mainLoop.remainingBlockers,t=f.mainLoop.expectedBlockers;r?r<t?u.setStatus(e+" ("+(t-r)+"/"+t+")"):u.setStatus(e):u.setStatus("")}},runIter(e){if(!re){if(u.preMainLoop){var r=u.preMainLoop();if(r===!1)return}cr(e),u.postMainLoop&&u.postMainLoop()}}},isFullscreen:!1,pointerLock:!1,moduleContextCreatedCallbacks:[],workers:[],init(){if(f.initted)return;f.initted=!0;var e={};e.canHandle=function(o){return!u.noImageDecoding&&/\.(jpg|jpeg|png|bmp)$/i.test(o)},e.handle=function(o,s,l,d){var c=new Blob([o],{type:f.getMimetype(s)});c.size!==o.length&&(c=new Blob([new Uint8Array(o).buffer],{type:f.getMimetype(s)}));var v=URL.createObjectURL(c),m=new Image;m.onload=()=>{De(m.complete,`Image ${s} could not be decoded`);var p=document.createElement("canvas");p.width=m.width,p.height=m.height;var g=p.getContext("2d");g.drawImage(m,0,0),qa[s]=p,URL.revokeObjectURL(v),l&&l(o)},m.onerror=p=>{H(`Image ${v} could not be decoded`),d&&d()},m.src=v},lr.push(e);var r={};r.canHandle=function(o){return!u.noAudioDecoding&&o.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},r.handle=function(o,s,l,d){var c=!1;function v(w){c||(c=!0,Ya[s]=w,l&&l(o))}var m=new Blob([o],{type:f.getMimetype(s)}),p=URL.createObjectURL(m),g=new Audio;g.addEventListener("canplaythrough",()=>v(g),!1),g.onerror=function(E){if(c)return;H(`warning: browser could not fully decode audio ${s}, trying slower base64 approach`);function C(k){for(var h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",y="=",$="",D=0,j=0,A=0;A<k.length;A++)for(D=D<<8|k[A],j+=8;j>=6;){var fi=D>>j-6&63;j-=6,$+=h[fi]}return j==2?($+=h[(D&3)<<4],$+=y+y):j==4&&($+=h[(D&15)<<2],$+=y),$}g.src="data:audio/x-"+s.substr(-3)+";base64,"+C(o),v(g)},g.src=p,qr(()=>{v(g)},1e4)},lr.push(r);function t(){f.pointerLock=document.pointerLockElement===u.canvas||document.mozPointerLockElement===u.canvas||document.webkitPointerLockElement===u.canvas||document.msPointerLockElement===u.canvas}var n=u.canvas;n&&(n.requestPointerLock=n.requestPointerLock||n.mozRequestPointerLock||n.webkitRequestPointerLock||n.msRequestPointerLock||(()=>{}),n.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||(()=>{}),n.exitPointerLock=n.exitPointerLock.bind(document),document.addEventListener("pointerlockchange",t,!1),document.addEventListener("mozpointerlockchange",t,!1),document.addEventListener("webkitpointerlockchange",t,!1),document.addEventListener("mspointerlockchange",t,!1),u.elementPointerLock&&n.addEventListener("click",a=>{!f.pointerLock&&u.canvas.requestPointerLock&&(u.canvas.requestPointerLock(),a.preventDefault())},!1))},createContext(e,r,t,n){if(r&&u.ctx&&e==u.canvas)return u.ctx;var a,o;if(r){var s={antialias:!1,alpha:!1,majorVersion:1};if(n)for(var l in n)s[l]=n[l];typeof GL<"u"&&(o=GL.createContext(e,s),o&&(a=GL.getContext(o).GLctx))}else a=e.getContext("2d");return a?(t&&(r||De(typeof GLctx>"u","cannot set in module if GLctx is used, but we are a non-GL context that would replace it"),u.ctx=a,r&&GL.makeContextCurrent(o),u.useWebGL=r,f.moduleContextCreatedCallbacks.forEach(d=>d()),f.init()),a):null},destroyContext(e,r,t){},fullscreenHandlersInstalled:!1,lockPointer:void 0,resizeCanvas:void 0,requestFullscreen(e,r){f.lockPointer=e,f.resizeCanvas=r,typeof f.lockPointer>"u"&&(f.lockPointer=!0),typeof f.resizeCanvas>"u"&&(f.resizeCanvas=!1);var t=u.canvas;function n(){f.isFullscreen=!1;var o=t.parentNode;(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===o?(t.exitFullscreen=f.exitFullscreen,f.lockPointer&&t.requestPointerLock(),f.isFullscreen=!0,f.resizeCanvas?f.setFullscreenCanvasSize():f.updateCanvasDimensions(t)):(o.parentNode.insertBefore(t,o),o.parentNode.removeChild(o),f.resizeCanvas?f.setWindowedCanvasSize():f.updateCanvasDimensions(t)),u.onFullScreen&&u.onFullScreen(f.isFullscreen),u.onFullscreen&&u.onFullscreen(f.isFullscreen)}f.fullscreenHandlersInstalled||(f.fullscreenHandlersInstalled=!0,document.addEventListener("fullscreenchange",n,!1),document.addEventListener("mozfullscreenchange",n,!1),document.addEventListener("webkitfullscreenchange",n,!1),document.addEventListener("MSFullscreenChange",n,!1));var a=document.createElement("div");t.parentNode.insertBefore(a,t),a.appendChild(t),a.requestFullscreen=a.requestFullscreen||a.mozRequestFullScreen||a.msRequestFullscreen||(a.webkitRequestFullscreen?()=>a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):null)||(a.webkitRequestFullScreen?()=>a.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):null),a.requestFullscreen()},exitFullscreen(){if(!f.isFullscreen)return!1;var e=document.exitFullscreen||document.cancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitCancelFullScreen||(()=>{});return e.apply(document,[]),!0},nextRAF:0,fakeRequestAnimationFrame(e){var r=Date.now();if(f.nextRAF===0)f.nextRAF=r+1e3/60;else for(;r+2>=f.nextRAF;)f.nextRAF+=1e3/60;var t=Math.max(f.nextRAF-r,0);setTimeout(e,t)},requestAnimationFrame(e){if(typeof requestAnimationFrame=="function"){requestAnimationFrame(e);return}var r=f.fakeRequestAnimationFrame;r(e)},safeSetTimeout(e,r){return qr(e,r)},safeRequestAnimationFrame(e){return f.requestAnimationFrame(()=>{cr(e)})},getMimetype(e){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[e.substr(e.lastIndexOf(".")+1)]},getUserMedia(e){window.getUserMedia||(window.getUserMedia=navigator.getUserMedia||navigator.mozGetUserMedia),window.getUserMedia(e)},getMovementX(e){return e.movementX||e.mozMovementX||e.webkitMovementX||0},getMovementY(e){return e.movementY||e.mozMovementY||e.webkitMovementY||0},getMouseWheelDelta(e){var r=0;switch(e.type){case"DOMMouseScroll":r=e.detail/3;break;case"mousewheel":r=e.wheelDelta/120;break;case"wheel":switch(r=e.deltaY,e.deltaMode){case 0:r/=100;break;case 1:r/=3;break;case 2:r*=80;break;default:throw"unrecognized mouse wheel delta mode: "+e.deltaMode}break;default:throw"unrecognized mouse wheel event: "+e.type}return r},mouseX:0,mouseY:0,mouseMovementX:0,mouseMovementY:0,touches:{},lastTouches:{},calculateMouseEvent(e){if(f.pointerLock)e.type!="mousemove"&&"mozMovementX"in e?f.mouseMovementX=f.mouseMovementY=0:(f.mouseMovementX=f.getMovementX(e),f.mouseMovementY=f.getMovementY(e)),typeof SDL<"u"?(f.mouseX=SDL.mouseX+f.mouseMovementX,f.mouseY=SDL.mouseY+f.mouseMovementY):(f.mouseX+=f.mouseMovementX,f.mouseY+=f.mouseMovementY);else{var r=u.canvas.getBoundingClientRect(),t=u.canvas.width,n=u.canvas.height,a=typeof window.scrollX<"u"?window.scrollX:window.pageXOffset,o=typeof window.scrollY<"u"?window.scrollY:window.pageYOffset;if(e.type==="touchstart"||e.type==="touchend"||e.type==="touchmove"){var s=e.touch;if(s===void 0)return;var l=s.pageX-(a+r.left),d=s.pageY-(o+r.top);l=l*(t/r.width),d=d*(n/r.height);var c={x:l,y:d};if(e.type==="touchstart")f.lastTouches[s.identifier]=c,f.touches[s.identifier]=c;else if(e.type==="touchend"||e.type==="touchmove"){var v=f.touches[s.identifier];v||(v=c),f.lastTouches[s.identifier]=v,f.touches[s.identifier]=c}return}var m=e.pageX-(a+r.left),p=e.pageY-(o+r.top);m=m*(t/r.width),p=p*(n/r.height),f.mouseMovementX=m-f.mouseX,f.mouseMovementY=p-f.mouseY,f.mouseX=m,f.mouseY=p}},resizeListeners:[],updateResizeListeners(){var e=u.canvas;f.resizeListeners.forEach(r=>r(e.width,e.height))},setCanvasSize(e,r,t){var n=u.canvas;f.updateCanvasDimensions(n,e,r),t||f.updateResizeListeners()},windowedWidth:0,windowedHeight:0,setFullscreenCanvasSize(){if(typeof SDL<"u"){var e=F[SDL.screen>>2];e=e|8388608,_[SDL.screen>>2]=e}f.updateCanvasDimensions(u.canvas),f.updateResizeListeners()},setWindowedCanvasSize(){if(typeof SDL<"u"){var e=F[SDL.screen>>2];e=e&-8388609,_[SDL.screen>>2]=e}f.updateCanvasDimensions(u.canvas),f.updateResizeListeners()},updateCanvasDimensions(e,r,t){r&&t?(e.widthNative=r,e.heightNative=t):(r=e.widthNative,t=e.heightNative);var n=r,a=t;if(u.forcedAspectRatio&&u.forcedAspectRatio>0&&(n/a<u.forcedAspectRatio?n=Math.round(a*u.forcedAspectRatio):a=Math.round(n/u.forcedAspectRatio)),(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===e.parentNode&&typeof screen<"u"){var o=Math.min(screen.width/n,screen.height/a);n=Math.round(n*o),a=Math.round(a*o)}f.resizeCanvas?(e.width!=n&&(e.width=n),e.height!=a&&(e.height=a),typeof e.style<"u"&&(e.style.removeProperty("width"),e.style.removeProperty("height"))):(e.width!=r&&(e.width=r),e.height!=t&&(e.height=t),typeof e.style<"u"&&(n!=r||a!=t?(e.style.setProperty("width",n+"px","important"),e.style.setProperty("height",a+"px","important")):(e.style.removeProperty("width"),e.style.removeProperty("height"))))}},fr=e=>{for(;e.length>0;)e.shift()(u)},Kt=e=>{var r=wt(),t=e();return _t(r),t},Yr=(e,r,t)=>ur(e,V,r,t),Jt=e=>{var r=Me(e)+1,t=kr(r);return Yr(e,t,r),t},he=e=>(he.recursionGuard=(he.recursionGuard|0)+1,he.recursionGuard>1?e:Kt(()=>{try{var r=e;r.startsWith("__Z")&&(r=r.substr(1));var t=Jt(r),n=kr(4),a=Et(t,0,0,n);if(_[n>>2]===0&&a)return me(a)}catch{}finally{Y(a),he.recursionGuard<2&&--he.recursionGuard}return e}));function Zt(e){this.excPtr=e,this.ptr=e-24,this.set_type=function(r){F[this.ptr+4>>2]=r},this.get_type=function(){return F[this.ptr+4>>2]},this.set_destructor=function(r){F[this.ptr+8>>2]=r},this.get_destructor=function(){return F[this.ptr+8>>2]},this.set_caught=function(r){r=r?1:0,O[this.ptr+12>>0]=r},this.get_caught=function(){return O[this.ptr+12>>0]!=0},this.set_rethrown=function(r){r=r?1:0,O[this.ptr+13>>0]=r},this.get_rethrown=function(){return O[this.ptr+13>>0]!=0},this.init=function(r,t){this.set_adjusted_ptr(0),this.set_type(r),this.set_destructor(t)},this.set_adjusted_ptr=function(r){F[this.ptr+16>>2]=r},this.get_adjusted_ptr=function(){return F[this.ptr+16>>2]},this.get_exception_ptr=function(){var r=bt(this.get_type());if(r)return F[this.excPtr>>2];var t=this.get_adjusted_ptr();return t!==0?t:this.excPtr}}var Nr=0,Qt=0,en=(e,r,t)=>{var n=new Zt(e);throw n.init(r,t),Nr=e,Qt++,Nr},rn=e=>(_[gt()>>2]=e,e);function tn(e,r,t){M.varargs=t;try{var n=M.getStreamFromFD(e);switch(r){case 0:{var a=M.get();if(a<0)return-28;for(;i.streams[a];)a++;var o;return o=i.createStream(n,a),o.fd}case 1:case 2:return 0;case 3:return n.flags;case 4:{var a=M.get();return n.flags|=a,0}case 5:{var a=M.getp(),s=0;return G[a+s>>1]=2,0}case 6:case 7:return 0;case 16:case 8:return-28;case 9:return rn(28),-1;default:return-28}}catch(l){if(typeof i>"u"||l.name!=="ErrnoError")throw l;return-l.errno}}function nn(e,r,t){M.varargs=t;try{var n=M.getStreamFromFD(e);switch(r){case 21509:return n.tty?0:-59;case 21505:{if(!n.tty)return-59;if(n.tty.ops.ioctl_tcgets){var a=n.tty.ops.ioctl_tcgets(n),o=M.getp();_[o>>2]=a.c_iflag||0,_[o+4>>2]=a.c_oflag||0,_[o+8>>2]=a.c_cflag||0,_[o+12>>2]=a.c_lflag||0;for(var s=0;s<32;s++)O[o+s+17>>0]=a.c_cc[s]||0;return 0}return 0}case 21510:case 21511:case 21512:return n.tty?0:-59;case 21506:case 21507:case 21508:{if(!n.tty)return-59;if(n.tty.ops.ioctl_tcsets){for(var o=M.getp(),l=_[o>>2],d=_[o+4>>2],c=_[o+8>>2],v=_[o+12>>2],m=[],s=0;s<32;s++)m.push(O[o+s+17>>0]);return n.tty.ops.ioctl_tcsets(n.tty,r,{c_iflag:l,c_oflag:d,c_cflag:c,c_lflag:v,c_cc:m})}return 0}case 21519:{if(!n.tty)return-59;var o=M.getp();return _[o>>2]=0,0}case 21520:return n.tty?-28:-59;case 21531:{var o=M.getp();return i.ioctl(n,r,o)}case 21523:{if(!n.tty)return-59;if(n.tty.ops.ioctl_tiocgwinsz){var p=n.tty.ops.ioctl_tiocgwinsz(n.tty),o=M.getp();G[o>>1]=p[0],G[o+2>>1]=p[1]}return 0}case 21524:return n.tty?0:-59;case 21515:return n.tty?0:-59;default:return-28}}catch(g){if(typeof i>"u"||g.name!=="ErrnoError")throw g;return-g.errno}}function an(e,r,t,n){M.varargs=n;try{r=M.getStr(r),r=M.calculateAt(e,r);var a=n?M.get():0;return i.open(r,t,a).fd}catch(o){if(typeof i>"u"||o.name!=="ErrnoError")throw o;return-o.errno}}var je={},pe=e=>{for(;e.length;){var r=e.pop(),t=e.pop();t(r)}};function Oe(e){return this.fromWireType(_[e>>2])}var ie={},Q={},ze={},Xr,Ue=e=>{throw new Xr(e)},I=(e,r,t)=>{e.forEach(function(l){ze[l]=r});function n(l){var d=t(l);d.length!==e.length&&Ue("Mismatched type converter count");for(var c=0;c<e.length;++c)X(e[c],d[c])}var a=new Array(r.length),o=[],s=0;r.forEach((l,d)=>{Q.hasOwnProperty(l)?a[d]=Q[l]:(o.push(l),ie.hasOwnProperty(l)||(ie[l]=[]),ie[l].push(()=>{a[d]=Q[l],++s,s===o.length&&n(a)}))}),o.length===0&&n(a)},on=e=>{var r=je[e];delete je[e];var t=r.elements,n=t.length,a=t.map(l=>l.getterReturnType).concat(t.map(l=>l.setterArgumentType)),o=r.rawConstructor,s=r.rawDestructor;I([e],a,function(l){return t.forEach((d,c)=>{var v=l[c],m=d.getter,p=d.getterContext,g=l[c+n],w=d.setter,E=d.setterContext;d.read=C=>v.fromWireType(m(p,C)),d.write=(C,k)=>{var h=[];w(E,C,g.toWireType(h,k)),pe(h)}}),[{name:r.name,fromWireType:d=>{for(var c=new Array(n),v=0;v<n;++v)c[v]=t[v].read(d);return s(d),c},toWireType:(d,c)=>{if(n!==c.length)throw new TypeError(`Incorrect number of tuple elements for ${r.name}: expected=${n}, actual=${c.length}`);for(var v=o(),m=0;m<n;++m)t[m].write(v,c[m]);return d!==null&&d.push(s,v),v},argPackAdvance:q,readValueFromPointer:Oe,destructorFunction:s}]})},Ve={},sn=e=>{var r=Ve[e];delete Ve[e];var t=r.rawConstructor,n=r.rawDestructor,a=r.fields,o=a.map(s=>s.getterReturnType).concat(a.map(s=>s.setterArgumentType));I([e],o,s=>{var l={};return a.forEach((d,c)=>{var v=d.fieldName,m=s[c],p=d.getter,g=d.getterContext,w=s[c+a.length],E=d.setter,C=d.setterContext;l[v]={read:k=>m.fromWireType(p(g,k)),write:(k,h)=>{var y=[];E(C,k,w.toWireType(y,h)),pe(y)}}}),[{name:r.name,fromWireType:d=>{var c={};for(var v in l)c[v]=l[v].read(d);return n(d),c},toWireType:(d,c)=>{for(var v in l)if(!(v in c))throw new TypeError(`Missing field: "${v}"`);var m=t();for(v in l)l[v].write(m,c[v]);return d!==null&&d.push(n,m),m},argPackAdvance:q,readValueFromPointer:Oe,destructorFunction:n}]})},un=(e,r,t,n,a)=>{},ln=()=>{for(var e=new Array(256),r=0;r<256;++r)e[r]=String.fromCharCode(r);Gr=e},Gr,x=e=>{for(var r="",t=e;V[t];)r+=Gr[V[t++]];return r},oe,S=e=>{throw new oe(e)};function dn(e,r,t={}){var n=r.name;if(e||S(`type "${n}" must have a positive integer typeid pointer`),Q.hasOwnProperty(e)){if(t.ignoreDuplicateRegistrations)return;S(`Cannot register type '${n}' twice`)}if(Q[e]=r,delete ze[e],ie.hasOwnProperty(e)){var a=ie[e];delete ie[e],a.forEach(o=>o())}}function X(e,r,t={}){if(!("argPackAdvance"in r))throw new TypeError("registerType registeredInstance requires argPackAdvance");return dn(e,r,t)}var q=8,cn=(e,r,t,n)=>{r=x(r),X(e,{name:r,fromWireType:function(a){return!!a},toWireType:function(a,o){return o?t:n},argPackAdvance:q,readValueFromPointer:function(a){return this.fromWireType(V[a])},destructorFunction:null})},fn=e=>({count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}),vr=e=>{function r(t){return t.$$.ptrType.registeredClass.name}S(r(e)+" instance already deleted")},mr=!1,Kr=e=>{},vn=e=>{e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)},Jr=e=>{e.count.value-=1;var r=e.count.value===0;r&&vn(e)},Zr=(e,r,t)=>{if(r===t)return e;if(t.baseClass===void 0)return null;var n=Zr(e,r,t.baseClass);return n===null?null:t.downcast(n)},Qr={},mn=()=>Object.keys(we).length,hn=()=>{var e=[];for(var r in we)we.hasOwnProperty(r)&&e.push(we[r]);return e},ge=[],hr=()=>{for(;ge.length;){var e=ge.pop();e.$$.deleteScheduled=!1,e.delete()}},ye,pn=e=>{ye=e,ge.length&&ye&&ye(hr)},gn=()=>{u.getInheritedInstanceCount=mn,u.getLiveInheritedInstances=hn,u.flushPendingDeletes=hr,u.setDelayFunction=pn},we={},yn=(e,r)=>{for(r===void 0&&S("ptr should not be undefined");e.baseClass;)r=e.upcast(r),e=e.baseClass;return r},wn=(e,r)=>(r=yn(e,r),we[r]),Ie=(e,r)=>{(!r.ptrType||!r.ptr)&&Ue("makeClassHandle requires ptr and ptrType");var t=!!r.smartPtrType,n=!!r.smartPtr;return t!==n&&Ue("Both smartPtrType and smartPtr must be specified"),r.count={value:1},_e(Object.create(e,{$$:{value:r}}))};function _n(e){var r=this.getPointee(e);if(!r)return this.destructor(e),null;var t=wn(this.registeredClass,r);if(t!==void 0){if(t.$$.count.value===0)return t.$$.ptr=r,t.$$.smartPtr=e,t.clone();var n=t.clone();return this.destructor(e),n}function a(){return this.isSmartPointer?Ie(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:r,smartPtrType:this,smartPtr:e}):Ie(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var o=this.registeredClass.getActualType(r),s=Qr[o];if(!s)return a.call(this);var l;this.isConst?l=s.constPointerType:l=s.pointerType;var d=Zr(r,this.registeredClass,l.registeredClass);return d===null?a.call(this):this.isSmartPointer?Ie(l.registeredClass.instancePrototype,{ptrType:l,ptr:d,smartPtrType:this,smartPtr:e}):Ie(l.registeredClass.instancePrototype,{ptrType:l,ptr:d})}var _e=e=>typeof FinalizationRegistry>"u"?(_e=r=>r,e):(mr=new FinalizationRegistry(r=>{Jr(r.$$)}),_e=r=>{var t=r.$$,n=!!t.smartPtr;if(n){var a={$$:t};mr.register(r,a,r)}return r},Kr=r=>mr.unregister(r),_e(e)),En=()=>{Object.assign(We.prototype,{isAliasOf(e){if(!(this instanceof We)||!(e instanceof We))return!1;var r=this.$$.ptrType.registeredClass,t=this.$$.ptr;e.$$=e.$$;for(var n=e.$$.ptrType.registeredClass,a=e.$$.ptr;r.baseClass;)t=r.upcast(t),r=r.baseClass;for(;n.baseClass;)a=n.upcast(a),n=n.baseClass;return r===n&&t===a},clone(){if(this.$$.ptr||vr(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=_e(Object.create(Object.getPrototypeOf(this),{$$:{value:fn(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e},delete(){this.$$.ptr||vr(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&S("Object already scheduled for deletion"),Kr(this),Jr(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||vr(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&S("Object already scheduled for deletion"),ge.push(this),ge.length===1&&ye&&ye(hr),this.$$.deleteScheduled=!0,this}})};function We(){}var bn=48,Cn=57,Be=e=>{if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var r=e.charCodeAt(0);return r>=bn&&r<=Cn?`_${e}`:e};function pr(e,r){return e=Be(e),{[e]:function(){return r.apply(this,arguments)}}[e]}var gr=(e,r,t)=>{if(e[r].overloadTable===void 0){var n=e[r];e[r]=function(){return e[r].overloadTable.hasOwnProperty(arguments.length)||S(`Function '${t}' called with an invalid number of arguments (${arguments.length}) - expects one of (${e[r].overloadTable})!`),e[r].overloadTable[arguments.length].apply(this,arguments)},e[r].overloadTable=[],e[r].overloadTable[n.argCount]=n}},et=(e,r,t)=>{u.hasOwnProperty(e)?((t===void 0||u[e].overloadTable!==void 0&&u[e].overloadTable[t]!==void 0)&&S(`Cannot register public name '${e}' twice`),gr(u,e,e),u.hasOwnProperty(t)&&S(`Cannot register multiple overloads of a function with the same number of arguments (${t})!`),u[e].overloadTable[t]=r):(u[e]=r,t!==void 0&&(u[e].numArguments=t))};function kn(e,r,t,n,a,o,s,l){this.name=e,this.constructor=r,this.instancePrototype=t,this.rawDestructor=n,this.baseClass=a,this.getActualType=o,this.upcast=s,this.downcast=l,this.pureVirtualFunctions=[]}var He=(e,r,t)=>{for(;r!==t;)r.upcast||S(`Expected null or instance of ${t.name}, got an instance of ${r.name}`),e=r.upcast(e),r=r.baseClass;return e};function Fn(e,r){if(r===null)return this.isReference&&S(`null is not a valid ${this.name}`),0;r.$$||S(`Cannot pass "${wr(r)}" as a ${this.name}`),r.$$.ptr||S(`Cannot pass deleted object as a pointer of type ${this.name}`);var t=r.$$.ptrType.registeredClass,n=He(r.$$.ptr,t,this.registeredClass);return n}function Pn(e,r){var t;if(r===null)return this.isReference&&S(`null is not a valid ${this.name}`),this.isSmartPointer?(t=this.rawConstructor(),e!==null&&e.push(this.rawDestructor,t),t):0;r.$$||S(`Cannot pass "${wr(r)}" as a ${this.name}`),r.$$.ptr||S(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&r.$$.ptrType.isConst&&S(`Cannot convert argument of type ${r.$$.smartPtrType?r.$$.smartPtrType.name:r.$$.ptrType.name} to parameter type ${this.name}`);var n=r.$$.ptrType.registeredClass;if(t=He(r.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(r.$$.smartPtr===void 0&&S("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:r.$$.smartPtrType===this?t=r.$$.smartPtr:S(`Cannot convert argument of type ${r.$$.smartPtrType?r.$$.smartPtrType.name:r.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:t=r.$$.smartPtr;break;case 2:if(r.$$.smartPtrType===this)t=r.$$.smartPtr;else{var a=r.clone();t=this.rawShare(t,U.toHandle(()=>a.delete())),e!==null&&e.push(this.rawDestructor,t)}break;default:S("Unsupporting sharing policy")}return t}function Sn(e,r){if(r===null)return this.isReference&&S(`null is not a valid ${this.name}`),0;r.$$||S(`Cannot pass "${wr(r)}" as a ${this.name}`),r.$$.ptr||S(`Cannot pass deleted object as a pointer of type ${this.name}`),r.$$.ptrType.isConst&&S(`Cannot convert argument of type ${r.$$.ptrType.name} to parameter type ${this.name}`);var t=r.$$.ptrType.registeredClass,n=He(r.$$.ptr,t,this.registeredClass);return n}function rt(e){return this.fromWireType(F[e>>2])}var Dn=()=>{Object.assign(Ee.prototype,{getPointee(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},destructor(e){this.rawDestructor&&this.rawDestructor(e)},argPackAdvance:q,readValueFromPointer:rt,deleteObject(e){e!==null&&e.delete()},fromWireType:_n})};function Ee(e,r,t,n,a,o,s,l,d,c,v){this.name=e,this.registeredClass=r,this.isReference=t,this.isConst=n,this.isSmartPointer=a,this.pointeeType=o,this.sharingPolicy=s,this.rawGetPointee=l,this.rawConstructor=d,this.rawShare=c,this.rawDestructor=v,!a&&r.baseClass===void 0?n?(this.toWireType=Fn,this.destructorFunction=null):(this.toWireType=Sn,this.destructorFunction=null):this.toWireType=Pn}var tt=(e,r,t)=>{u.hasOwnProperty(e)||Ue("Replacing nonexistant public symbol"),u[e].overloadTable!==void 0&&t!==void 0?u[e].overloadTable[t]=r:(u[e]=r,u[e].argCount=t)},Ln=(e,r,t)=>{var n=u["dynCall_"+e];return t&&t.length?n.apply(null,[r].concat(t)):n.call(null,r)},qe=[],nt,at=e=>{var r=qe[e];return r||(e>=qe.length&&(qe.length=e+1),qe[e]=r=nt.get(e)),r},$n=(e,r,t)=>{if(e.includes("j"))return Ln(e,r,t);var n=at(r).apply(null,t);return n},Tn=(e,r)=>{var t=[];return function(){return t.length=0,Object.assign(t,arguments),$n(e,r,t)}},R=(e,r)=>{e=x(e);function t(){return e.includes("j")?Tn(e,r):at(r)}var n=t();return typeof n!="function"&&S(`unknown function pointer with signature ${e}: ${r}`),n},An=(e,r)=>{var t=pr(r,function(n){this.name=r,this.message=n;var a=new Error(n).stack;a!==void 0&&(this.stack=this.toString()+`
`+a.replace(/^Error(:[^\n]*)?\n/,""))});return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},t},it,ot=e=>{var r=yt(e),t=x(r);return Y(r),t},ee=(e,r)=>{var t=[],n={};function a(o){if(!n[o]&&!Q[o]){if(ze[o]){ze[o].forEach(a);return}t.push(o),n[o]=!0}}throw r.forEach(a),new it(`${e}: `+t.map(ot).join([", "]))},Mn=(e,r,t,n,a,o,s,l,d,c,v,m,p)=>{v=x(v),o=R(a,o),l&&(l=R(s,l)),c&&(c=R(d,c)),p=R(m,p);var g=Be(v);et(g,function(){ee(`Cannot construct ${v} due to unbound types`,[n])}),I([e,r,t],n?[n]:[],function(w){w=w[0];var E,C;n?(E=w.registeredClass,C=E.instancePrototype):C=We.prototype;var k=pr(g,function(){if(Object.getPrototypeOf(this)!==h)throw new oe("Use 'new' to construct "+v);if(y.constructor_body===void 0)throw new oe(v+" has no accessible constructor");var A=y.constructor_body[arguments.length];if(A===void 0)throw new oe(`Tried to invoke ctor of ${v} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(y.constructor_body).toString()}) parameters instead!`);return A.apply(this,arguments)}),h=Object.create(C,{constructor:{value:k}});k.prototype=h;var y=new kn(v,k,h,p,E,o,l,c);y.baseClass&&(y.baseClass.__derivedClasses===void 0&&(y.baseClass.__derivedClasses=[]),y.baseClass.__derivedClasses.push(y));var $=new Ee(v,y,!0,!1,!1),D=new Ee(v+"*",y,!1,!1,!1),j=new Ee(v+" const*",y,!1,!0,!1);return Qr[e]={pointerType:D,constPointerType:j},tt(g,k),[$,D,j]})};function st(e,r){if(!(e instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof e} which is not a function`);var t=pr(e.name||"unknownFunctionName",function(){});t.prototype=e.prototype;var n=new t,a=e.apply(n,r);return a instanceof Object?a:n}function Ye(e,r,t,n,a,o){var s=r.length;s<2&&S("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var l=r[1]!==null&&t!==null,d=!1,c=1;c<r.length;++c)if(r[c]!==null&&r[c].destructorFunction===void 0){d=!0;break}for(var v=r[0].name!=="void",m="",p="",c=0;c<s-2;++c)m+=(c!==0?", ":"")+"arg"+c,p+=(c!==0?", ":"")+"arg"+c+"Wired";var g=`
        return function ${Be(e)}(${m}) {
        if (arguments.length !== ${s-2}) {
          throwBindingError('function ${e} called with ' + arguments.length + ' arguments, expected ${s-2}');
        }`;d&&(g+=`var destructors = [];
`);var w=d?"destructors":"null",E=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],C=[S,n,a,pe,r[0],r[1]];l&&(g+="var thisWired = classParam.toWireType("+w+`, this);
`);for(var c=0;c<s-2;++c)g+="var arg"+c+"Wired = argType"+c+".toWireType("+w+", arg"+c+"); // "+r[c+2].name+`
`,E.push("argType"+c),C.push(r[c+2]);if(l&&(p="thisWired"+(p.length>0?", ":"")+p),g+=(v||o?"var rv = ":"")+"invoker(fn"+(p.length>0?", ":"")+p+`);
`,d)g+=`runDestructors(destructors);
`;else for(var c=l?1:2;c<r.length;++c){var k=c===1?"thisWired":"arg"+(c-2)+"Wired";r[c].destructorFunction!==null&&(g+=k+"_dtor("+k+"); // "+r[c].name+`
`,E.push(k+"_dtor"),C.push(r[c].destructorFunction))}return v&&(g+=`var ret = retType.fromWireType(rv);
return ret;
`),g+=`}
`,E.push(g),st(Function,E).apply(null,C)}var Ne=(e,r)=>{for(var t=[],n=0;n<e;n++)t.push(F[r+n*4>>2]);return t},Rn=(e,r,t,n,a,o,s,l)=>{var d=Ne(t,n);r=x(r),o=R(a,o),I([],[e],function(c){c=c[0];var v=`${c.name}.${r}`;function m(){ee(`Cannot call ${v} due to unbound types`,d)}r.startsWith("@@")&&(r=Symbol[r.substring(2)]);var p=c.registeredClass.constructor;return p[r]===void 0?(m.argCount=t-1,p[r]=m):(gr(p,r,v),p[r].overloadTable[t-1]=m),I([],d,function(g){var w=[g[0],null].concat(g.slice(1)),E=Ye(v,w,null,o,s,l);if(p[r].overloadTable===void 0?(E.argCount=t-1,p[r]=E):p[r].overloadTable[t-1]=E,c.registeredClass.__derivedClasses)for(const C of c.registeredClass.__derivedClasses)C.constructor.hasOwnProperty(r)||(C.constructor[r]=E);return[]}),[]})},xn=(e,r,t,n,a,o)=>{var s=Ne(r,t);a=R(n,a),I([],[e],function(l){l=l[0];var d=`constructor ${l.name}`;if(l.registeredClass.constructor_body===void 0&&(l.registeredClass.constructor_body=[]),l.registeredClass.constructor_body[r-1]!==void 0)throw new oe(`Cannot register multiple constructors with identical number of parameters (${r-1}) for class '${l.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return l.registeredClass.constructor_body[r-1]=()=>{ee(`Cannot construct ${l.name} due to unbound types`,s)},I([],s,c=>(c.splice(1,0,null),l.registeredClass.constructor_body[r-1]=Ye(d,c,null,a,o),[])),[]})},jn=(e,r,t,n,a,o,s,l,d)=>{var c=Ne(t,n);r=x(r),o=R(a,o),I([],[e],function(v){v=v[0];var m=`${v.name}.${r}`;r.startsWith("@@")&&(r=Symbol[r.substring(2)]),l&&v.registeredClass.pureVirtualFunctions.push(r);function p(){ee(`Cannot call ${m} due to unbound types`,c)}var g=v.registeredClass.instancePrototype,w=g[r];return w===void 0||w.overloadTable===void 0&&w.className!==v.name&&w.argCount===t-2?(p.argCount=t-2,p.className=v.name,g[r]=p):(gr(g,r,m),g[r].overloadTable[t-2]=p),I([],c,function(E){var C=Ye(m,E,v,o,s,d);return g[r].overloadTable===void 0?(C.argCount=t-2,g[r]=C):g[r].overloadTable[t-2]=C,[]}),[]})},ut=(e,r,t)=>(e instanceof Object||S(`${t} with invalid "this": ${e}`),e instanceof r.registeredClass.constructor||S(`${t} incompatible with "this" of type ${e.constructor.name}`),e.$$.ptr||S(`cannot call emscripten binding method ${t} on deleted object`),He(e.$$.ptr,e.$$.ptrType.registeredClass,r.registeredClass)),On=(e,r,t,n,a,o,s,l,d,c)=>{r=x(r),a=R(n,a),I([],[e],function(v){v=v[0];var m=`${v.name}.${r}`,p={get(){ee(`Cannot access ${m} due to unbound types`,[t,s])},enumerable:!0,configurable:!0};return d?p.set=()=>ee(`Cannot access ${m} due to unbound types`,[t,s]):p.set=g=>S(m+" is a read-only property"),Object.defineProperty(v.registeredClass.instancePrototype,r,p),I([],d?[t,s]:[t],function(g){var w=g[0],E={get(){var k=ut(this,v,m+" getter");return w.fromWireType(a(o,k))},enumerable:!0};if(d){d=R(l,d);var C=g[1];E.set=function(k){var h=ut(this,v,m+" setter"),y=[];d(c,h,C.toWireType(y,k)),pe(y)}}return Object.defineProperty(v.registeredClass.instancePrototype,r,E),[]}),[]})},zn=(e,r,t)=>{e=x(e),I([],[r],function(n){return n=n[0],u[e]=n.fromWireType(t),[]})};function Un(){Object.assign(lt.prototype,{get(e){return this.allocated[e]},has(e){return this.allocated[e]!==void 0},allocate(e){var r=this.freelist.pop()||this.allocated.length;return this.allocated[r]=e,r},free(e){this.allocated[e]=void 0,this.freelist.push(e)}})}function lt(){this.allocated=[void 0],this.freelist=[]}var B=new lt,yr=e=>{e>=B.reserved&&--B.get(e).refcount===0&&B.free(e)},Vn=()=>{for(var e=0,r=B.reserved;r<B.allocated.length;++r)B.allocated[r]!==void 0&&++e;return e},In=()=>{B.allocated.push({value:void 0},{value:null},{value:!0},{value:!1}),B.reserved=B.allocated.length,u.count_emval_handles=Vn},U={toValue:e=>(e||S("Cannot use deleted val. handle = "+e),B.get(e).value),toHandle:e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return B.allocate({refcount:1,value:e})}}},Wn=(e,r)=>{r=x(r),X(e,{name:r,fromWireType:t=>{var n=U.toValue(t);return yr(t),n},toWireType:(t,n)=>U.toHandle(n),argPackAdvance:q,readValueFromPointer:Oe,destructorFunction:null})},wr=e=>{if(e===null)return"null";var r=typeof e;return r==="object"||r==="array"||r==="function"?e.toString():""+e},Bn=(e,r)=>{switch(r){case 4:return function(t){return this.fromWireType($r[t>>2])};case 8:return function(t){return this.fromWireType(Tr[t>>3])};default:throw new TypeError(`invalid float width (${r}): ${e}`)}},Hn=(e,r,t)=>{r=x(r),X(e,{name:r,fromWireType:n=>n,toWireType:(n,a)=>a,argPackAdvance:q,readValueFromPointer:Bn(r,t),destructorFunction:null})},qn=(e,r,t,n,a,o,s)=>{var l=Ne(r,t);e=x(e),a=R(n,a),et(e,function(){ee(`Cannot call ${e} due to unbound types`,l)},r-1),I([],l,function(d){var c=[d[0],null].concat(d.slice(1));return tt(e,Ye(e,c,null,a,o,s),r-1),[]})},Yn=(e,r,t)=>{switch(r){case 1:return t?n=>O[n>>0]:n=>V[n>>0];case 2:return t?n=>G[n>>1]:n=>Le[n>>1];case 4:return t?n=>_[n>>2]:n=>F[n>>2];default:throw new TypeError(`invalid integer width (${r}): ${e}`)}},Nn=(e,r,t,n,a)=>{r=x(r),a===-1&&(a=4294967295);var o=v=>v;if(n===0){var s=32-8*t;o=v=>v<<s>>>s}var l=r.includes("unsigned"),d=(v,m)=>{},c;l?c=function(v,m){return d(m,this.name),m>>>0}:c=function(v,m){return d(m,this.name),m},X(e,{name:r,fromWireType:o,toWireType:c,argPackAdvance:q,readValueFromPointer:Yn(r,t,n!==0),destructorFunction:null})},Xn=(e,r,t)=>{var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],a=n[r];function o(s){var l=F[s>>2],d=F[s+4>>2];return new a(O.buffer,d,l)}t=x(t),X(e,{name:t,fromWireType:o,argPackAdvance:q,readValueFromPointer:o},{ignoreDuplicateRegistrations:!0})},Gn=(e,r,t,n,a,o,s,l,d,c,v,m)=>{t=x(t),o=R(a,o),l=R(s,l),c=R(d,c),m=R(v,m),I([e],[r],function(p){p=p[0];var g=new Ee(t,p.registeredClass,!1,!1,!0,p,n,o,l,c,m);return[g]})},Kn=(e,r)=>{r=x(r);var t=r==="std::string";X(e,{name:r,fromWireType(n){var a=F[n>>2],o=n+4,s;if(t)for(var l=o,d=0;d<=a;++d){var c=o+d;if(d==a||V[c]==0){var v=c-l,m=me(l,v);s===void 0?s=m:(s+=String.fromCharCode(0),s+=m),l=c+1}}else{for(var p=new Array(a),d=0;d<a;++d)p[d]=String.fromCharCode(V[o+d]);s=p.join("")}return Y(n),s},toWireType(n,a){a instanceof ArrayBuffer&&(a=new Uint8Array(a));var o,s=typeof a=="string";s||a instanceof Uint8Array||a instanceof Uint8ClampedArray||a instanceof Int8Array||S("Cannot pass non-string to std::string"),t&&s?o=Me(a):o=a.length;var l=Cr(4+o+1),d=l+4;if(F[l>>2]=o,t&&s)Yr(a,d,o+1);else if(s)for(var c=0;c<o;++c){var v=a.charCodeAt(c);v>255&&(Y(d),S("String has UTF-16 code units that do not fit in 8 bits")),V[d+c]=v}else for(var c=0;c<o;++c)V[d+c]=a[c];return n!==null&&n.push(Y,l),l},argPackAdvance:q,readValueFromPointer:rt,destructorFunction(n){Y(n)}})},dt=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Jn=(e,r)=>{for(var t=e,n=t>>1,a=n+r/2;!(n>=a)&&Le[n];)++n;if(t=n<<1,t-e>32&&dt)return dt.decode(V.subarray(e,t));for(var o="",s=0;!(s>=r/2);++s){var l=G[e+s*2>>1];if(l==0)break;o+=String.fromCharCode(l)}return o},Zn=(e,r,t)=>{if(t===void 0&&(t=2147483647),t<2)return 0;t-=2;for(var n=r,a=t<e.length*2?t/2:e.length,o=0;o<a;++o){var s=e.charCodeAt(o);G[r>>1]=s,r+=2}return G[r>>1]=0,r-n},Qn=e=>e.length*2,ea=(e,r)=>{for(var t=0,n="";!(t>=r/4);){var a=_[e+t*4>>2];if(a==0)break;if(++t,a>=65536){var o=a-65536;n+=String.fromCharCode(55296|o>>10,56320|o&1023)}else n+=String.fromCharCode(a)}return n},ra=(e,r,t)=>{if(t===void 0&&(t=2147483647),t<4)return 0;for(var n=r,a=n+t-4,o=0;o<e.length;++o){var s=e.charCodeAt(o);if(s>=55296&&s<=57343){var l=e.charCodeAt(++o);s=65536+((s&1023)<<10)|l&1023}if(_[r>>2]=s,r+=4,r+4>a)break}return _[r>>2]=0,r-n},ta=e=>{for(var r=0,t=0;t<e.length;++t){var n=e.charCodeAt(t);n>=55296&&n<=57343&&++t,r+=4}return r},na=(e,r,t)=>{t=x(t);var n,a,o,s,l;r===2?(n=Jn,a=Zn,s=Qn,o=()=>Le,l=1):r===4&&(n=ea,a=ra,s=ta,o=()=>F,l=2),X(e,{name:t,fromWireType:d=>{for(var c=F[d>>2],v=o(),m,p=d+4,g=0;g<=c;++g){var w=d+4+g*r;if(g==c||v[w>>l]==0){var E=w-p,C=n(p,E);m===void 0?m=C:(m+=String.fromCharCode(0),m+=C),p=w+r}}return Y(d),m},toWireType:(d,c)=>{typeof c!="string"&&S(`Cannot pass non-string to C++ string type ${t}`);var v=s(c),m=Cr(4+v+r);return F[m>>2]=v>>l,a(c,m+4,v+r),d!==null&&d.push(Y,m),m},argPackAdvance:q,readValueFromPointer:Oe,destructorFunction(d){Y(d)}})},aa=(e,r,t,n,a,o)=>{je[e]={name:x(r),rawConstructor:R(t,n),rawDestructor:R(a,o),elements:[]}},ia=(e,r,t,n,a,o,s,l,d)=>{je[e].elements.push({getterReturnType:r,getter:R(t,n),getterContext:a,setterArgumentType:o,setter:R(s,l),setterContext:d})},oa=(e,r,t,n,a,o)=>{Ve[e]={name:x(r),rawConstructor:R(t,n),rawDestructor:R(a,o),fields:[]}},sa=(e,r,t,n,a,o,s,l,d,c)=>{Ve[e].fields.push({fieldName:x(r),getterReturnType:t,getter:R(n,a),getterContext:o,setterArgumentType:s,setter:R(l,d),setterContext:c})},ua=(e,r)=>{r=x(r),X(e,{isVoid:!0,name:r,argPackAdvance:0,fromWireType:()=>{},toWireType:(t,n)=>{}})},la=!0,da=()=>la,_r=(e,r)=>{var t=Q[e];return t===void 0&&S(r+" has unknown type "+ot(e)),t},ca=(e,r,t)=>{e=U.toValue(e),r=_r(r,"emval::as");var n=[],a=U.toHandle(n);return F[t>>2]=a,r.toWireType(n,e)},fa={},ct=e=>{var r=fa[e];return r===void 0?x(e):r},Er=[],va=(e,r,t,n)=>{e=Er[e],r=U.toValue(r),t=ct(t),e(r,t,null,n)},ma=e=>{var r=Er.length;return Er.push(e),r},ha=(e,r)=>{for(var t=new Array(e),n=0;n<e;++n)t[n]=_r(F[r+n*4>>2],"parameter "+n);return t},ft={},pa=(e,r)=>{var t=ha(e,r),n=t[0],a=n.name+"_$"+t.slice(1).map(function(w){return w.name}).join("_")+"$",o=ft[a];if(o!==void 0)return o;for(var s=["retType"],l=[n],d="",c=0;c<e-1;++c)d+=(c!==0?", ":"")+"arg"+c,s.push("argType"+c),l.push(t[1+c]);for(var v=Be("methodCaller_"+a),m="return function "+v+`(handle, name, destructors, args) {
`,p=0,c=0;c<e-1;++c)m+="    var arg"+c+" = argType"+c+".readValueFromPointer(args"+(p?"+"+p:"")+`);
`,p+=t[c+1].argPackAdvance;m+="    var rv = handle[name]("+d+`);
`;for(var c=0;c<e-1;++c)t[c+1].deleteObject&&(m+="    argType"+c+".deleteObject(arg"+c+`);
`);n.isVoid||(m+=`    return retType.toWireType(destructors, rv);
`),m+=`};
`,s.push(m);var g=st(Function,s).apply(null,l);return o=ma(g),ft[a]=o,o},ga=(e,r)=>(e=U.toValue(e),r=U.toValue(r),U.toHandle(e[r])),ya=e=>{e>4&&(B.get(e).refcount+=1)},wa=()=>U.toHandle([]),_a=e=>U.toHandle(ct(e)),Ea=e=>{var r=U.toValue(e);pe(r),yr(e)},ba=(e,r,t)=>{e=U.toValue(e),r=U.toValue(r),t=U.toValue(t),e[r]=t},Ca=(e,r)=>{e=_r(e,"_emval_take_value");var t=e.readValueFromPointer(r);return U.toHandle(t)},ka=()=>{te("")},vt=()=>1073741824,Fa=()=>vt(),Pa=(e,r,t)=>V.copyWithin(e,r,r+t),Sa=e=>{var r=Se.buffer,t=(e-r.byteLength+65535)/65536;try{return Se.grow(t),Ar(),1}catch{}},Da=e=>{var r=V.length;e>>>=0;var t=vt();if(e>t)return!1;for(var n=(d,c)=>d+(c-d%c)%c,a=1;a<=4;a*=2){var o=r*(1+.2/a);o=Math.min(o,e+100663296);var s=Math.min(t,n(Math.max(e,o),65536)),l=Sa(s);if(l)return!0}return!1},br={},La=()=>rr||"./this.program",be=()=>{if(!be.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",r={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:La()};for(var t in br)br[t]===void 0?delete r[t]:r[t]=br[t];var n=[];for(var t in r)n.push(`${t}=${r[t]}`);be.strings=n}return be.strings},$a=(e,r)=>{for(var t=0;t<e.length;++t)O[r++>>0]=e.charCodeAt(t);O[r>>0]=0},Ta=(e,r)=>{var t=0;return be().forEach((n,a)=>{var o=r+t;F[e+a*4>>2]=o,$a(n,o),t+=n.length+1}),0},Aa=(e,r)=>{var t=be();F[e>>2]=t.length;var n=0;return t.forEach(a=>n+=a.length+1),F[r>>2]=n,0};function Ma(e){try{var r=M.getStreamFromFD(e);return i.close(r),0}catch(t){if(typeof i>"u"||t.name!=="ErrnoError")throw t;return t.errno}}var Ra=(e,r,t,n)=>{for(var a=0,o=0;o<t;o++){var s=F[r>>2],l=F[r+4>>2];r+=8;var d=i.read(e,O,s,l,n);if(d<0)return-1;if(a+=d,d<l)break;typeof n<"u"&&(n+=d)}return a};function xa(e,r,t,n){try{var a=M.getStreamFromFD(e),o=Ra(a,r,t);return F[n>>2]=o,0}catch(s){if(typeof i>"u"||s.name!=="ErrnoError")throw s;return s.errno}}var ja=(e,r)=>r+2097152>>>0<4194305-!!e?(e>>>0)+r*4294967296:NaN;function Oa(e,r,t,n,a){var o=ja(r,t);try{if(isNaN(o))return 61;var s=M.getStreamFromFD(e);return i.llseek(s,o,n),z=[s.position>>>0,(P=s.position,+Math.abs(P)>=1?P>0?+Math.floor(P/4294967296)>>>0:~~+Math.ceil((P-+(~~P>>>0))/4294967296)>>>0:0)],_[a>>2]=z[0],_[a+4>>2]=z[1],s.getdents&&o===0&&n===0&&(s.getdents=null),0}catch(l){if(typeof i>"u"||l.name!=="ErrnoError")throw l;return l.errno}}var za=(e,r,t,n)=>{for(var a=0,o=0;o<t;o++){var s=F[r>>2],l=F[r+4>>2];r+=8;var d=i.write(e,O,s,l,n);if(d<0)return-1;a+=d,typeof n<"u"&&(n+=d)}return a};function Ua(e,r,t,n){try{var a=M.getStreamFromFD(e),o=za(a,r,t);return F[n>>2]=o,0}catch(s){if(typeof i>"u"||s.name!=="ErrnoError")throw s;return s.errno}}var Xe=e=>e%4===0&&(e%100!==0||e%400===0),Va=(e,r)=>{for(var t=0,n=0;n<=r;t+=e[n++]);return t},mt=[31,29,31,30,31,30,31,31,30,31,30,31],ht=[31,28,31,30,31,30,31,31,30,31,30,31],Ia=(e,r)=>{for(var t=new Date(e.getTime());r>0;){var n=Xe(t.getFullYear()),a=t.getMonth(),o=(n?mt:ht)[a];if(r>o-t.getDate())r-=o-t.getDate()+1,t.setDate(1),a<11?t.setMonth(a+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1));else return t.setDate(t.getDate()+r),t}return t},Wa=(e,r)=>{O.set(e,r)},Ba=(e,r,t,n)=>{var a=F[n+40>>2],o={tm_sec:_[n>>2],tm_min:_[n+4>>2],tm_hour:_[n+8>>2],tm_mday:_[n+12>>2],tm_mon:_[n+16>>2],tm_year:_[n+20>>2],tm_wday:_[n+24>>2],tm_yday:_[n+28>>2],tm_isdst:_[n+32>>2],tm_gmtoff:_[n+36>>2],tm_zone:a?me(a):""},s=me(t),l={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var d in l)s=s.replace(new RegExp(d,"g"),l[d]);var c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],v=["January","February","March","April","May","June","July","August","September","October","November","December"];function m(h,y,$){for(var D=typeof h=="number"?h.toString():h||"";D.length<y;)D=$[0]+D;return D}function p(h,y){return m(h,y,"0")}function g(h,y){function $(j){return j<0?-1:j>0?1:0}var D;return(D=$(h.getFullYear()-y.getFullYear()))===0&&(D=$(h.getMonth()-y.getMonth()))===0&&(D=$(h.getDate()-y.getDate())),D}function w(h){switch(h.getDay()){case 0:return new Date(h.getFullYear()-1,11,29);case 1:return h;case 2:return new Date(h.getFullYear(),0,3);case 3:return new Date(h.getFullYear(),0,2);case 4:return new Date(h.getFullYear(),0,1);case 5:return new Date(h.getFullYear()-1,11,31);case 6:return new Date(h.getFullYear()-1,11,30)}}function E(h){var y=Ia(new Date(h.tm_year+1900,0,1),h.tm_yday),$=new Date(y.getFullYear(),0,4),D=new Date(y.getFullYear()+1,0,4),j=w($),A=w(D);return g(j,y)<=0?g(A,y)<=0?y.getFullYear()+1:y.getFullYear():y.getFullYear()-1}var C={"%a":h=>c[h.tm_wday].substring(0,3),"%A":h=>c[h.tm_wday],"%b":h=>v[h.tm_mon].substring(0,3),"%B":h=>v[h.tm_mon],"%C":h=>{var y=h.tm_year+1900;return p(y/100|0,2)},"%d":h=>p(h.tm_mday,2),"%e":h=>m(h.tm_mday,2," "),"%g":h=>E(h).toString().substring(2),"%G":h=>E(h),"%H":h=>p(h.tm_hour,2),"%I":h=>{var y=h.tm_hour;return y==0?y=12:y>12&&(y-=12),p(y,2)},"%j":h=>p(h.tm_mday+Va(Xe(h.tm_year+1900)?mt:ht,h.tm_mon-1),3),"%m":h=>p(h.tm_mon+1,2),"%M":h=>p(h.tm_min,2),"%n":()=>`
`,"%p":h=>h.tm_hour>=0&&h.tm_hour<12?"AM":"PM","%S":h=>p(h.tm_sec,2),"%t":()=>"	","%u":h=>h.tm_wday||7,"%U":h=>{var y=h.tm_yday+7-h.tm_wday;return p(Math.floor(y/7),2)},"%V":h=>{var y=Math.floor((h.tm_yday+7-(h.tm_wday+6)%7)/7);if((h.tm_wday+371-h.tm_yday-2)%7<=2&&y++,y){if(y==53){var D=(h.tm_wday+371-h.tm_yday)%7;D!=4&&(D!=3||!Xe(h.tm_year))&&(y=1)}}else{y=52;var $=(h.tm_wday+7-h.tm_yday-1)%7;($==4||$==5&&Xe(h.tm_year%400-1))&&y++}return p(y,2)},"%w":h=>h.tm_wday,"%W":h=>{var y=h.tm_yday+7-(h.tm_wday+6)%7;return p(Math.floor(y/7),2)},"%y":h=>(h.tm_year+1900).toString().substring(2),"%Y":h=>h.tm_year+1900,"%z":h=>{var y=h.tm_gmtoff,$=y>=0;return y=Math.abs(y)/60,y=y/60*100+y%60,($?"+":"-")+("0000"+y).slice(-4)},"%Z":h=>h.tm_zone,"%%":()=>"%"};s=s.replace(/%%/g,"\0\0");for(var d in C)s.includes(d)&&(s=s.replace(new RegExp(d,"g"),C[d](o)));s=s.replace(/\0\0/g,"%");var k=Re(s,!1);return k.length>r?0:(Wa(k,e),k.length-1)},Ha=(e,r,t,n,a)=>Ba(e,r,t,n);u.requestFullscreen=(e,r)=>f.requestFullscreen(e,r),u.requestAnimationFrame=e=>f.requestAnimationFrame(e),u.setCanvasSize=(e,r,t)=>f.setCanvasSize(e,r,t),u.pauseMainLoop=()=>f.mainLoop.pause(),u.resumeMainLoop=()=>f.mainLoop.resume(),u.getUserMedia=()=>f.getUserMedia(),u.createContext=(e,r,t,n)=>f.createContext(e,r,t,n);var qa={},Ya={},pt=function(e,r,t,n){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=i.nextInode++,this.name=r,this.mode=t,this.node_ops={},this.stream_ops={},this.rdev=n},Ge=365,Ke=146;Object.defineProperties(pt.prototype,{read:{get:function(){return(this.mode&Ge)===Ge},set:function(e){e?this.mode|=Ge:this.mode&=~Ge}},write:{get:function(){return(this.mode&Ke)===Ke},set:function(e){e?this.mode|=Ke:this.mode&=~Ke}},isFolder:{get:function(){return i.isDir(this.mode)}},isDevice:{get:function(){return i.isChrdev(this.mode)}}}),i.FSNode=pt,i.createPreloadedFile=Ht,i.staticInit(),u.FS_createPath=i.createPath,u.FS_createDataFile=i.createDataFile,u.FS_createPreloadedFile=i.createPreloadedFile,u.FS_unlink=i.unlink,u.FS_createLazyFile=i.createLazyFile,u.FS_createDevice=i.createDevice,Xr=u.InternalError=class extends Error{constructor(r){super(r),this.name="InternalError"}},ln(),oe=u.BindingError=class extends Error{constructor(r){super(r),this.name="BindingError"}},En(),gn(),Dn(),it=u.UnboundTypeError=An(Error,"UnboundTypeError"),Un(),In();var Na={e:en,G:tn,S:nn,F:an,X:on,m:sn,K:un,V:cn,i:Mn,s:Rn,d:xn,c:jn,f:On,a:zn,U:Wn,I:Hn,b:qn,w:Nn,l:Xn,k:Gn,H:Kn,D:na,Y:aa,A:ia,n:oa,h:sa,W:ua,M:da,q:ca,o:va,g:yr,p:pa,r:ga,u:ya,x:wa,v:_a,t:Ea,y:ba,j:Ca,z:ka,O:Fa,P:Ae,T:Pa,N:Da,Q:Ta,R:Aa,C:Ma,E:xa,J:Oa,B:Ua,L:Ha},T=Ot(),Xa=()=>(Xa=T._)(),Cr=e=>(Cr=T.$)(e),Y=e=>(Y=T.ba)(e),gt=()=>(gt=T.ca)(),yt=e=>(yt=T.da)(e),Ga=u.__embind_initialize_bindings=()=>(Ga=u.__embind_initialize_bindings=T.ea)(),wt=()=>(wt=T.fa)(),_t=e=>(_t=T.ga)(e),kr=e=>(kr=T.ha)(e),Et=(e,r,t,n)=>(Et=T.ia)(e,r,t,n),bt=e=>(bt=T.ja)(e),Ka=u.dynCall_ji=(e,r)=>(Ka=u.dynCall_ji=T.ka)(e,r),Ja=u.dynCall_viijii=(e,r,t,n,a,o,s)=>(Ja=u.dynCall_viijii=T.la)(e,r,t,n,a,o,s),Za=u.dynCall_jiii=(e,r,t,n)=>(Za=u.dynCall_jiii=T.ma)(e,r,t,n),Qa=u.dynCall_vij=(e,r,t,n)=>(Qa=u.dynCall_vij=T.na)(e,r,t,n),ei=u.dynCall_jii=(e,r,t)=>(ei=u.dynCall_jii=T.oa)(e,r,t),ri=u.dynCall_viji=(e,r,t,n,a)=>(ri=u.dynCall_viji=T.pa)(e,r,t,n,a),ti=u.dynCall_jiji=(e,r,t,n,a)=>(ti=u.dynCall_jiji=T.qa)(e,r,t,n,a),ni=u.dynCall_iiiiij=(e,r,t,n,a,o,s)=>(ni=u.dynCall_iiiiij=T.ra)(e,r,t,n,a,o,s),ai=u.dynCall_iiiiijj=(e,r,t,n,a,o,s,l,d)=>(ai=u.dynCall_iiiiijj=T.sa)(e,r,t,n,a,o,s,l,d),ii=u.dynCall_iiiiiijj=(e,r,t,n,a,o,s,l,d,c)=>(ii=u.dynCall_iiiiiijj=T.ta)(e,r,t,n,a,o,s,l,d,c);u.addRunDependency=$e,u.removeRunDependency=ve,u.FS_createPath=i.createPath,u.FS_createLazyFile=i.createLazyFile,u.FS_createDevice=i.createDevice,u.FS_createPreloadedFile=i.createPreloadedFile,u.FS_createDataFile=i.createDataFile,u.FS_unlink=i.unlink;var Je;fe=function e(){Je||Ct(),Je||(fe=e)};function Ct(){if(Z>0||(Dt(),Z>0))return;function e(){Je||(Je=!0,u.calledRun=!0,!re&&(Lt(),Pr(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),$t()))}u.setStatus?(u.setStatus("Running..."),setTimeout(function(){setTimeout(function(){u.setStatus("")},1),e()},1)):e()}if(u.preInit)for(typeof u.preInit=="function"&&(u.preInit=[u.preInit]);u.preInit.length>0;)u.preInit.pop()();Ct(),typeof u.FS>"u"&&typeof i<"u"&&(u.FS=i),u.imread=function(e){var r=null;typeof e=="string"?r=document.getElementById(e):r=e;var t=null,n=null;if(r instanceof HTMLImageElement)t=document.createElement("canvas"),t.width=r.width,t.height=r.height,n=t.getContext("2d",{willReadFrequently:!0}),n.drawImage(r,0,0,r.width,r.height);else if(r instanceof HTMLCanvasElement||r instanceof OffscreenCanvas)t=r,n=t.getContext("2d");else throw new Error("Please input the valid canvas or img id.");var a=n.getImageData(0,0,t.width,t.height);return u.matFromImageData(a)},u.imshow=function(e,r){var t=null;if(typeof e=="string"?t=document.getElementById(e):t=e,!(t instanceof HTMLCanvasElement))throw new Error("Please input the valid canvas element or id.");if(!(r instanceof u.Mat))throw new Error("Please input the valid Module.Mat instance.");var n=new u.Mat,a=r.type()%8,o=a<=u.CV_8S?1:a<=u.CV_32S?1/256:255,s=a===u.CV_8S||a===u.CV_16S?128:0;switch(r.convertTo(n,u.CV_8U,o,s),n.type()){case u.CV_8UC1:u.cvtColor(n,n,u.COLOR_GRAY2RGBA);break;case u.CV_8UC3:u.cvtColor(n,n,u.COLOR_RGB2RGBA);break;case u.CV_8UC4:break;default:throw new Error("Bad number of channels (Source image must have 1, 3 or 4 channels)")}var l=new ImageData(new Uint8ClampedArray(n.data),n.cols,n.rows),d=t.getContext("2d");d.clearRect(0,0,t.width,t.height),t.width=l.width,t.height=l.height,d.putImageData(l,0,0),n.delete()},u.VideoCapture=function(e){var r=null;if(typeof e=="string"?r=document.getElementById(e):r=e,!(r instanceof HTMLVideoElement))throw new Error("Please input the valid video element or id.");var t=document.createElement("canvas");t.width=r.width,t.height=r.height;var n=t.getContext("2d");this.video=r,this.read=function(a){if(!(a instanceof u.Mat))throw new Error("Please input the valid Module.Mat instance.");if(a.type()!==u.CV_8UC4)throw new Error("Bad type of input mat: the type should be Module.CV_8UC4.");if(a.cols!==r.width||a.rows!==r.height)throw new Error("Bad size of input mat: the size should be same as the video.");n.drawImage(r,0,0,r.width,r.height),a.data.set(n.getImageData(0,0,r.width,r.height).data)}};function oi(e,r){this.start=typeof e>"u"?0:e,this.end=typeof r>"u"?0:r}u.Range=oi;function Ze(e,r){this.x=typeof e>"u"?0:e,this.y=typeof r>"u"?0:r}u.Point=Ze;function si(e,r){this.width=typeof e>"u"?0:e,this.height=typeof r>"u"?0:r}u.Size=si;function ui(){switch(arguments.length){case 0:{this.x=0,this.y=0,this.width=0,this.height=0;break}case 1:{var e=arguments[0];this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height;break}case 2:{var r=arguments[0],t=arguments[1];this.x=r.x,this.y=r.y,this.width=t.width,this.height=t.height;break}case 4:{this.x=arguments[0],this.y=arguments[1],this.width=arguments[2],this.height=arguments[3];break}default:throw new Error("Invalid arguments")}}u.Rect=ui;function Qe(){switch(arguments.length){case 0:{this.center={x:0,y:0},this.size={width:0,height:0},this.angle=0;break}case 3:{this.center=arguments[0],this.size=arguments[1],this.angle=arguments[2];break}default:throw new Error("Invalid arguments")}}Qe.points=function(e){return u.rotatedRectPoints(e)},Qe.boundingRect=function(e){return u.rotatedRectBoundingRect(e)},Qe.boundingRect2f=function(e){return u.rotatedRectBoundingRect2f(e)},u.RotatedRect=Qe;function er(e,r,t,n){this.push(typeof e>"u"?0:e),this.push(typeof r>"u"?0:r),this.push(typeof t>"u"?0:t),this.push(typeof n>"u"?0:n)}er.prototype=new Array,er.all=function(e){return new er(e,e,e,e)},u.Scalar=er;function li(){switch(arguments.length){case 0:{this.minVal=0,this.maxVal=0,this.minLoc=new Ze,this.maxLoc=new Ze;break}case 4:{this.minVal=arguments[0],this.maxVal=arguments[1],this.minLoc=arguments[2],this.maxLoc=arguments[3];break}default:throw new Error("Invalid arguments")}}u.MinMaxLoc=li;function di(){switch(arguments.length){case 0:{this.center=new Ze,this.radius=0;break}case 2:{this.center=arguments[0],this.radius=arguments[1];break}default:throw new Error("Invalid arguments")}}u.Circle=di;function ci(){switch(arguments.length){case 0:{this.type=0,this.maxCount=0,this.epsilon=0;break}case 3:{this.type=arguments[0],this.maxCount=arguments[1],this.epsilon=arguments[2];break}default:throw new Error("Invalid arguments")}}return u.TermCriteria=ci,u.matFromArray=function(e,r,t,n){var a=new u.Mat(e,r,t);switch(t){case u.CV_8U:case u.CV_8UC1:case u.CV_8UC2:case u.CV_8UC3:case u.CV_8UC4:{a.data.set(n);break}case u.CV_8S:case u.CV_8SC1:case u.CV_8SC2:case u.CV_8SC3:case u.CV_8SC4:{a.data8S.set(n);break}case u.CV_16U:case u.CV_16UC1:case u.CV_16UC2:case u.CV_16UC3:case u.CV_16UC4:{a.data16U.set(n);break}case u.CV_16S:case u.CV_16SC1:case u.CV_16SC2:case u.CV_16SC3:case u.CV_16SC4:{a.data16S.set(n);break}case u.CV_32S:case u.CV_32SC1:case u.CV_32SC2:case u.CV_32SC3:case u.CV_32SC4:{a.data32S.set(n);break}case u.CV_32F:case u.CV_32FC1:case u.CV_32FC2:case u.CV_32FC3:case u.CV_32FC4:{a.data32F.set(n);break}case u.CV_64F:case u.CV_64FC1:case u.CV_64FC2:case u.CV_64FC3:case u.CV_64FC4:{a.data64F.set(n);break}default:throw new Error("Type is unsupported")}return a},u.matFromImageData=function(e){var r=new u.Mat(e.height,e.width,u.CV_8UC4);return r.data.set(e.data),r},Fr.ready}})();function hi(){return mi(vi)}export{hi as initOpenCV};
